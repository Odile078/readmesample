!function(e){function t(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/build/",t(t.s=31)}([function(e,t){e.exports=IcbuIM.react},function(e,t){function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=n},function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.exports=n},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function a(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}e.exports=a},function(e,t,n){function a(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?r(e):t}var o=n(12),r=n(7);e.exports=a},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t,n){function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}var o=n(16);e.exports=a},function(e,t){function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}e.exports=n},function(e,t,n){"use strict";function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(n,!0).forEach(function(t){i()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var r=n(1),i=n.n(r),c=n(12),s=n.n(c),l=Object.prototype.toString,u=document.querySelector("meta[name=data-spm]")||{},p=u.content||"-1",d=document.body.dataset.spm||"-1",m=/xman_us_t=*.+?(x_lid=*.+?)[&;]/.exec(document.cookie),g=m&&m[1]&&m[1].slice(6)||"",f={getLoginId:function(){return g},decodeHTML:function(e){return e?(e=e.replace(/&lt;|&#60;/g,"<"),e=e.replace(/&gt;|&#62;/g,">"),e=e.replace(/&apos;|&#39;/g,"'"),e=e.replace(/&quot;|&#34;/g,'"'),e=e.replace(/&amp;|&#38;/g,"&")):e},_decodeHtml:function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value},encodeHTML:function(e){return 0===e.length?"":(e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/'/g,"&#39;"),e=e.replace(/"/g,"&quot;"))},getFileEtx:function(e,t){var n="";return n=-1!==t.lastIndexOf(".")&&t.lastIndexOf(".")!==t.length-1?t.substring(t.lastIndexOf(".")+1).toLowerCase():-1!==e.lastIndexOf(".")?e.substring(e.lastIndexOf(".")+1,e.lastIndexOf("?")):"attachment","xlsx"===n&&(n="xls"),"docx"===n&&(n="doc"),"jpg"===n&&(n="jpeg"),{xls:!0,xlsx:!0,txt:!0,rar:!0,zip:!0,pdf:!0,doc:!0,docx:!0,gif:!0,jpg:!0,jpeg:!0,bmp:!0,tif:!0,png:!0}[n]||(n="attachment"),n},prefixString:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={};return function(n){if(void 0===n||null===n)return e+n;var a=t[n];return void 0===a&&(a=e+n,t[n]=a),a}},formatNumber:function(e){return e<10?"0".concat(e):e},timeSince:function(e){"object"!==s()(e)&&(e=new Date(e));var t=Math.floor((+new Date-e)/1e3),n="".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate());if(t>86400)return n;var a=new Date;t-=(a.getTime()-new Date(a.getFullYear(),a.getMonth(),a.getDate()).getTime())/1e3;var o=Math.ceil(t/86400),r=f.formatNumber(e.getHours()),i=f.formatNumber(e.getMinutes()),c="".concat(r,":").concat(i);return 1===o?n:"".concat(c)},mergeObjects:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return o({},e,{},t)},{})},isString:function(e){return"string"==typeof e},isFunction:function(e){return"function"==typeof e},isArray:function(e){return"[object Array]"===l.call(e)},parseArray:function(e){return f.isArray(e)?e:[e]},arrayIncludes:function(e,t){return!!e&&-1!==e.indexOf(t)},htmlDecode:function(e){var t=document.createElement("div");return t.innerHTML=e,0===t.childNodes.length?"":t.childNodes[0].nodeValue},getParamsFromUrl:function(){for(var e=window.location.search.slice(1),t=e.split("&"),n=0;n<t.length;n++){var a=t[n].split("=");if("urlParams"===a[0])return JSON.parse(decodeURIComponent(a[1]))}return{}},getUrlVars:function(){var e={};return window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(t,n,a){e[n]=a}),e},getLinkVars:function(e){var t={};return e.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,n,a){t[n]=a}),t},checkLogin:function(){var e=document.cookie;return e&&-1!==e.indexOf("sign=y")},getLogParams:function(e){return{conversationId:"enaliint".concat(e.loginId),targetId:e.loginId,selfId:g,ifMute:e.mute?1:0,unreadNum:e.unreadCount,conversationTime:e.lastContactTime,spm:"".concat(p,".").concat(d,".single.0"),bizType:"single",hasPic:e.productRelation?1:0}}};t.a=f},function(e,t,n){function a(e){return o(e)||r(e)||i()}var o=n(17),r=n(18),i=n(19);e.exports=a},function(e,t){e.exports=IcbuIM["@alife/next"]},function(e,t){e.exports=IcbuIM.dva},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=a=function(e){return n(e)}:e.exports=a=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},a(t)}e.exports=a},function(e,t){e.exports=IcbuIM.classnames},function(e,t,n){"use strict";function a(e){var t=r()(e.filter(function(e){return"color"===e.groupType})),n=e.map(function(e){return e.groupDetail});return["green","blue","red"].forEach(function(e){-1===n.indexOf(e)&&t.unshift({groupDetail:e,groupType:"color",groupName:"group ".concat(e)})}),t}n.d(t,"d",function(){return i}),n.d(t,"j",function(){return c}),n.d(t,"e",function(){return s}),n.d(t,"f",function(){return l}),n.d(t,"c",function(){return u}),n.d(t,"k",function(){return p}),n.d(t,"m",function(){return d}),n.d(t,"a",function(){return m}),n.d(t,"b",function(){return g}),n.d(t,"h",function(){return f}),n.d(t,"g",function(){return h}),n.d(t,"n",function(){return y}),n.d(t,"l",function(){return v}),t.i=a;var o=n(9),r=n.n(o),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return e&&e.map(function(e){t.push({accountId:e.accountId,accountIdEncrypt:e.accountIdEncrypt,loginId:e.loginId})}),t},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return e.map&&e.map(function(e){var a=t.filter(function(t){return e.accountId===t.accountId});if(a.length>0){a[0].accountIdEncrypt=e.accountIdEncrypt;var o=Object.assign({},e,a[0],{showMenu:!1});n.push(o)}}),n},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=-1;return e.filter&&e.filter(function(e,a){return e.accountId===t&&(n=a),e.accountId===t}),n},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=-1,a=e.filter&&e.filter(function(e,a){return e.accountId===t&&(n=a),e.accountId===t});return n>=0?{current:a[0],_index:n}:{_index:-1}},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=s(e,t);n>=0&&e.splice(n,1)},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=l(e,t);n._index>=0&&(e.splice(n._index,1),n.current.stayTop=!0,e.unshift(n.current))},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=l(e,t),a=e&&e.filter(function(e){return!0===e.stayTop});if(n._index>=0){e.splice(n._index,1),n.current.stayTop=!1;var o=a.length>0?a.length-1:0;e.splice(o,0,n.current)}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.accountId,a=t.type,o=l(e,n);o._index>=0&&(e.splice(o._index,1),o.current.block="block"===a,e.splice(o._index,0,o.current))},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.accountId,a=t.type,o=l(e,n);o._index>=0&&(e.splice(o._index,1),o.current.mute="mute"===a,e.splice(o._index,0,o.current))},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.accountId,a=t.type,o=t.context,r=l(e,n);if(r._index>=0){if(e.splice(r._index,1),"mark"===a)r.current.mark=o;else if("unmark"===a){var i=r.current.mark,c=void 0===i?{}:i;"color"===c.markType&&c.markDetail===o.markDetail&&(c.markDetail="")}e.splice(r._index,0,r.current)}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=e&&e.filter(function(e){return!0===e.stayTop});if(t.stayTop)e.splice(0,0,t);else{var a=n.length>0?n.length:0;e.splice(a,0,t)}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=l(e,t),o=e&&e.filter(function(e){return!0===e.stayTop});if(a._index>=0)if(n.content)if(e.splice(a._index,1),a.current.lastContactTime=(new Date).getTime(),a.current.imMessageType=n.imMessageType||1,Object.assign(a.current.latestMessage,{content:n.content,gmtChat:(new Date).getTime(),gmtChatLong:(new Date).getTime(),contactRead:!1,messageType:"send",spamStatus:n.spamStatus}),a.current.stayTop)e.splice(0,0,a.current);else{var r=o.length>0?o.length:0;e.splice(r,0,a.current)}else e[a._index].unreadCount=0},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=n.status,o=n.content,r=n.subType,i=n.lastContactTime,c=n.lastContactTimeLong,s=n.uuid,u=l(e,t),p=u._index,d=u.current,m=e.filter(function(e){return!0===e.stayTop});if(e.splice(p,1),d.latestMessage=Object.assign({content:o||"",messageType:"MESSAGE_NEW"===a?"rec":"send",contactRead:"MESSAGE_NEW"===a,uuid:s}),d.imMessageType=r,d.lastContactTime=i,d.lastContactTimeLong=c,d.stayTop)e.splice(0,0,d);else{var g=m.length>0?m.length:0;e.splice(g,0,d)}}},function(e,t){e.exports=IcbuIM["dva-immer"]},function(e,t){function n(t,a){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,a)}e.exports=n},function(e,t){function n(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}e.exports=n},function(e,t){function n(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}e.exports=n},function(e,t){function n(){throw new TypeError("Invalid attempt to spread non-iterable instance")}e.exports=n},function(e,t,n){"use strict";var a=n(8),o=window.IcbuIM.lib.I18N.createI18N,r=o({parsePage:!0,namespace:"".concat(window.mcmsWithoutAppName?"":"intl-gangesweb.","messenger.list")}),i={formatContent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(e=a.a.decodeHTML(e),t){case 1:return e.match("<img src=")?"[".concat(r.get("content.image")||"Image","]"):e;case 2:return"[".concat(r.get("content.image")||"Image","]");case 3:return"[".concat(r.get("content.file")||"File","]");case 4:return"[".concat(r.get("content.audio")||"Audio","]");case 5:return"[".concat(r.get("content.video")||"Video","]");case 50:return"[".concat(r.get("content.inquiry")||"Inquiry","]");case 52:return"[".concat(r.get("content.quotation")||"Quotation","]");case 53:return"[".concat(r.get("content.file")||"File","]");case 54:return"[".concat(r.get("content.product")||"Product","]");case 55:return"[".concat(r.get("content.company")||"Company","]");case 56:return"[".concat(r.get("content.behavior")||"Behavior","]");case 57:return"[".concat(r.get("content.businessCard")||"Business card","]");case 58:return"[".concat(r.get("content.ta")||"TA","]");case 59:return"[".concat(r.get("content.tradeAssurance")||"Trade Assurance","]");case 60:return"[".concat(r.get("content.image")||"Image","]");case 61:return"[".concat(r.get("content.file")||"File","]");case 62:return"[".concat(r.get("content.video")||"Video","]");case 63:return"[".concat(r.get("content.text")||"Text","]");case 64:return"[".concat(r.get("content.orderTracking")||"Order Tracking","]");case 65:case 66:return"[".concat(r.get("content.businessCard")||"Business card","]");case 2e3:return"[".concat(r.get("content.product")||"Products","]");case 2001:return"[".concat(r.get("content.quotation")||"Quotation","]");case 2002:return"[".concat(r.get("content.ta")||"Order","]");default:return"[".concat(r.get("content.message")||"Message","]")}}};t.a=i},function(e,t){},function(e,t,n){"use strict";var a={PAGESIZE:50};t.a=a},function(e,t,n){"use strict";function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(n,!0).forEach(function(t){c()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function r(e){E.on("msgcallback",function(t){console.log("==== msgcallback list ====",t);var n={};try{n=JSON.parse(t.arg)}catch(e){console.log("3333333",e),v("msgcallbackParseError",C)}switch(1*t.msgType){case y.MESSAGE_NEW:clearTimeout(""),e({type:"updateMessage",payload:Object.assign({status:"MESSAGE_NEW"},n)}),e({type:"updateMessageFilter",payload:Object.assign({status:"MESSAGE_NEW"},n)}),"weblite"===window.host&&e({type:"updateNotification",payload:Object.assign({status:"MESSAGE_NEW"},n)});break;case y.MESSAGE_NEW_SELF:e({type:"updateMessage",payload:Object.assign({status:"MESSAGE_NEW_SELF"},n)}),e({type:"updateMessageFilter",payload:Object.assign({status:"MESSAGE_NEW_SELF"},n)});break;case y.MESSAGE_READ_STATUS_CHANGE:e({type:"updateMessage",payload:Object.assign({status:"MESSAGE_READ_STATUS_CHANGE"},n)}),e({type:"updateMessageFilter",payload:Object.assign({status:"MESSAGE_READ_STATUS_CHANGE"},n)});break;case y.MESSAGE_REVERT:e({type:"updateMessage",payload:Object.assign({status:"MESSAGE_REVERT"},n)}),e({type:"updateMessageFilter",payload:Object.assign({status:"MESSAGE_REVERT"},n)});break;case y.SYS_NOTICE_NEW:case y.LOGOUT:break;case 60000001:e({type:"meetingCall",payload:n})}})}var i=n(1),c=n.n(i),s=n(9),l=n.n(s),u=n(24),p=n(8),d=n(25),m=n(14),g=window.IcbuIM.lib.MessageTip,f=window.IcbuIM.lib.webIO,h=f.WebSocketIO,y=f.MessageType,v=window.IcbuIM.lib.log,b=window.IcbuIM.lib.I18N.createI18N,w=b({parsePage:!0,namespace:"".concat(window.mcmsWithoutAppName?"":"intl-gangesweb.","onepage.ma")}),E=window.apushClient=new h,k=window.host||"weblite",S=d.a[k],C="/sc.ma.".concat(k);t.a={namespace:"list",state:{list:window.contactItemList||[],listenMeeting:!0,searchList:[],filterList:[],markList:[],groupLists:{},selected:{accountId:-1,accountIdEncrypt:""},pagination:{currentPage:1,pageSize:50},mode:"default",MODEL_LOADED:!1,showList:S.showList,unreadCount:0,notification:{switch:!0,show:S.showNotification,accountId:"",accountIdEncrypt:"",name:"",latestMessage:{content:"",subType:""}},chatSize:"",showHeader:S.showHeader,showAction:S.showAction,showMoreInfo:S.showMoreInfo,showSearch:S.showSearch,labelGroups:[],contactGroups:[]},subscriptions:{logincCallback:function(e){var t=e.dispatch;window.EventBus&&window.EventBus.on("im-weblite:loginSuccess",function(){E.createClient(),r(t),window.EventBus.publish("im-weblite-list:apushClientReady")})},msgCallback:function(e){var t=e.dispatch;p.a.checkLogin()&&(E.createClient(),r(t))}},reducers:{formatList:function(e,t){var n=t.payload,a=void 0===n?{}:n;if(a.pagination&&a.pagination.currentPage>1){var o=a.list.slice(),r=[];o.map(function(t){Object(m.f)(e.list,t.accountId)._index<0&&r.push(t)});var i=[].concat(l()(e.list),r);e.list=i}else e.list=a.list;e.mode="default",e.MODEL_LOADED=!0},mergeList:function(e,t){var n=t.payload,a=void 0===n?{}:n;e.list=a.list,e.mode="default"},setSelected:function(e,t){var n=t.payload,a=void 0===n?{}:n,o=a.select&&a.select.accountId?a.select.accountId:-1,r=Object(m.e)(e.list,o);if("filter"===a.mode){var i=Object(m.e)(e.filterList,o);e.filterList[i].unreadCount=0,e.list[r].unreadCount=0,e.unreadCount=e.unreadCount-a.select.unreadCount,Object.assign(e.selected,a.select)}else e.list[r].unreadCount=0,e.unreadCount=e.unreadCount-a.select.unreadCount,Object.assign(e.selected,a.select)},insertContact:function(e,t){var n=t.payload,a=void 0===n?{}:n,o=a.contact;Object(m.g)(e.list,o),Object(m.g)(e.filterList,o),Object(m.g)(e.markList,o)},deleteContact:function(e,t){var n=t.payload,a=void 0===n?{}:n,o=a.list[0].accountId;if(Object(m.c)(e.list,o),Object(m.c)(e.filterList,o),Object(m.c)(e.markList,o),"group"===e.mode)for(var r in e.groupLists)Object(m.c)(e.groupLists[r],o)},pinToTop:function(e,t){var n=t.payload,a=void 0===n?{}:n,o=a.list[0].accountId;Object(m.k)(e.list,o),Object(m.k)(e.filterList,o),Object(m.k)(e.markList,o)},unTop:function(e,t){var n=t.payload,a=void 0===n?{}:n,o=a.list[0].accountId;Object(m.m)(e.list,o),Object(m.m)(e.filterList,o),Object(m.m)(e.markList,o)},changeBlock:function(e,t){var n=t.payload,a=void 0===n?{}:n,o=a.list[0].accountId,r=a.opType;if(Object(m.a)(e.list,{accountId:o,type:r}),Object(m.a)(e.filterList,{accountId:o,type:r}),Object(m.a)(e.markList,{accountId:o,type:r}),"group"===e.mode)for(var i in e.groupLists)Object(m.a)(e.groupLists[i],{accountId:o,type:r})},changeMute:function(e,t){var n=t.payload,a=void 0===n?{}:n,o=a.list[0].accountId,r=a.opType;if(Object(m.b)(e.list,{accountId:o,type:r}),Object(m.b)(e.filterList,{accountId:o,type:r}),Object(m.b)(e.markList,{accountId:o,type:r}),"group"===e.mode)for(var i in e.groupLists)Object(m.b)(e.groupLists[i],{accountId:o,type:r})},markColor:function(e,t){var n=t.payload,a=void 0===n?{}:n,o=a.list[0].accountId,r=a.opType,i=a.context;Object(m.h)(e.list,{accountId:o,type:r,context:i}),Object(m.h)(e.filterList,{accountId:o,type:r,context:i}),Object(m.h)(e.markList,{accountId:o,type:r,context:i})},updateMessage:function(e,t){var n=t.payload,a=void 0===n?{}:n,o=a.status,r=a.contactAccountId,i=a.contactAccountIdEncrypt,c=a.fullPortrait,s=a.companyName,l=a.contactLoginId,u=a.timeStamp,p=a.content,d=a.subType,g=a.lastContactTime,f=a.lastContactTimeLong,h=a.name,y=a.country,v=a.currentTimeZone,b=a.totalUnreadCount,w=a.currentContactUnreadCount,E=a.receiveAccountId,k=a.uuid,S=a.messageType,C=Object(m.f)(e.list,r),I=C._index,_=C.current,N=new RegExp("(^| )xman_us_f=([^;]+)"),x=document.cookie.match(N);switch(x=x&&x[2],o){case"MESSAGE_READ_STATUS_CHANGE":I>=0&&(e.list[I].lastContactTime=u,e.list[I].latestMessage=Object.assign(e.list[I].latestMessage,{contactRead:!0}));break;case"MESSAGE_REVERT":if(I>=0&&e.list[I].latestMessage&&e.list[I].latestMessage.uuid===k){var O="send"===S?"You have recalled a message":"User recalled the message";e.list[I].latestMessage=Object.assign(e.list[I].latestMessage,{content:O})}break;case"MESSAGE_NEW_SELF":case"MESSAGE_NEW":if(x.indexOf(E)<0)break;if("max"!==e.chatSize?e.unreadCount=b:e.selected&&e.selected.accountId!==r&&(e.unreadCount=b),I>=0)e.selected&&e.selected.accountId===r&&"max"===e.chatSize?_.unreadCount=0:_.unreadCount=w,Object(m.l)(e.list,r,a);else{var T={accountId:r,accountIdEncrypt:i,companyName:s,fullPortrait:c,lastContactTime:g,lastContactTimeLong:f,loginId:l,name:h,stayTop:!1,unreadCount:1,currentCountry:y,imMessageType:d,currentTimeZone:v,latestMessage:{contactRead:"MESSAGE_NEW"===o,content:p,messageType:"MESSAGE_NEW"===o?"rec":"send",gmtChat:g,gmtChatLong:f,uuid:k}};Object(m.g)(e.list,T)}break;default:return}},updateMessageFilter:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.payload;if("filter"===e.mode){var a=n.status,o=n.contactAccountId,r=n.contactAccountIdEncrypt,i=n.fullPortrait,c=n.companyName,s=n.contactLoginId,l=n.timeStamp,u=n.content,p=n.subType,d=n.lastContactTime,g=n.lastContactTimeLong,f=n.name,h=n.country,y=n.currentTimeZone,v=n.currentContactUnreadCount,b=n.receiveAccountId,w=n.uuid,E=n.messageType,k=Object(m.f)(e.filterList,o),S=k._index,C=k.current,I=new RegExp("(^| )xman_us_f=([^;]+)"),_=document.cookie.match(I);switch(_=_&&_[2],a){case"MESSAGE_READ_STATUS_CHANGE":S>=0&&(e.filterList[S].lastContactTime=l,e.filterList[S].latestMessage=Object.assign(e.filterList[S].latestMessage,{contactRead:!0}));break;case"MESSAGE_REVERT":if(S>=0&&e.filterList[S].latestMessage&&e.filterList[S].latestMessage.uuid===w){var N="send"===E?"You recalled the message":"User recalled the message";e.filterList[S].latestMessage=Object.assign(e.filterList[S].latestMessage,{content:N})}break;case"MESSAGE_NEW_SELF":case"MESSAGE_NEW":if(_.indexOf(b)<0)break;if(S>=0)e.selected&&e.selected.accountId===o&&"max"===e.chatSize?C.unreadCount=0:C.unreadCount=v,Object(m.l)(e.filterList,o,n);else{var x={accountId:o,accountIdEncrypt:r,companyName:c,fullPortrait:i,lastContactTime:d,lastContactTimeLong:g,loginId:s,name:f,stayTop:!1,unreadCount:1,currentCountry:h,imMessageType:p,currentTimeZone:y,latestMessage:{contactRead:"MESSAGE_NEW"===a,content:u,messageType:"MESSAGE_NEW"===a?"rec":"send",gmtChat:d,gmtChatLong:g,uuid:w}};Object(m.g)(e.filterList,x)}break;default:return}}},updateNotification:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.payload,a=n.contactAccountId,o=n.contactAccountIdEncrypt,r=n.content,i=n.subType,c=n.name,s=n.receiveAccountId;if(!e.selected||e.selected.accountId!==a||"max"!==e.chatSize){var l=document.cookie.match(new RegExp("(^| )xman_us_f=([^;]+)"));l=l&&l[2],l.indexOf(s)<0||(e.notification.accountIdEncrypt=o,e.notification.accountId=a,e.notification.name=c,e.notification.latestMessage={content:r,subType:i},e.notification.show=!0,e.notification.switch&&r.length&&window.EventBus.publish("im-weblite-list:changeListStatus",{status:e.showList?"expand-notificaton":"fold-notification"}))}},updateSendMessage:function(e,t){var n=t.payload,a=void 0===n?{}:n,o=Object(m.f)(e.list,e.selected.accountId);Object(m.n)(e.list,e.selected.accountId,a),Object(m.n)(e.filterList,e.selected.accountId,a),Object(m.n)(e.markList,e.selected.accountId,a),!a.content&&o._index>=0&&(e.unreadCount=e.unreadCount-o.current.unreadCount)},getUnreadList:function(e){var t=e.list;e.filterList=t.filter(function(e){return e.unreadCount>0}),e.mode="filter"},resetSearchList:function(e){e.searchList=[],e.mode="default"},setLoading:function(e,t){var n=t.payload,a=void 0===n?{}:n;e.MODEL_LOADED=a.MODEL_LOADED,e.mode=a.type||"default"},showList:function(e,t){var n=t.payload,a=void 0===n?{}:n;e.showList=a.showList,window.EventBus.publish("im-weblite-list:changeListStatus",{status:a.showList?"expand":"fold"})},setNoteStatus:function(e,t){var n=t.payload,a=void 0===n?{}:n;e.notification=Object.assign(e.notification,a)},setUnread:function(e,t){var n=t.payload,a=void 0===n?{}:n;e.unreadCount=a},setChatSize:function(e,t){var n=t.payload,a=void 0===n?{}:n;e.chatSize=a.chatSize},changeMenuStatus:function(e,t){var n=t.payload,a=void 0===n?{}:n;e.list.map(function(e){e.showMenu=!1});var o=Object(m.f)(e.list,a.accountId);o.current.length>0&&(e.list[o._index].showMenu=a.showMenu)},setPagination:function(e,t){var n=t.payload,a=void 0===n?{}:n;e.pagination=a},resetFilterList:function(e){e.filterList=[],e.mode="default"},setContactGroups:function(e,t){var n=t.payload,a=void 0===n?[]:n;e.contactGroups=a},setLabelGroups:function(e,t){for(var n=t.payload,a=void 0===n?[]:n,o=0;o<a.length;o++)if("archive"===a[o].groupType){var r=a.splice(o,1)[0];window.EventBus&&window.EventBus.publish("im-weblite-list:setLabelGroups",Object(m.i)(a)),a.push(r);break}e.labelGroups=a},setList:function(e,t){var n=t.payload,a=void 0===n?{}:n;e.list=a.list},setMarkList:function(e,t){var n=t.payload,a=void 0===n?{}:n;a.reset?e.markList=a.list:e.markList=e.markList.concat(a.list),e.mode="mark"},setGroupLists:function(e,t){var n=t.payload,a=void 0===n?{}:n,o=a.list,r=a.currentPage,i=a.key;e.groupLists[i]=1===r?o:e.groupLists[i].concat(o),e.groupLists[i].currentPage=r},resetGroupLists:function(e){e.groupLists={}},setMode:function(e,t){var n=t.payload,a=void 0===n?"default":n;e.mode=a},setListenMeeting:function(e,t){var n=t.payload;e.listenMeeting=n}},effects:{fetchRecentContactList:regeneratorRuntime.mark(function e(t,n){var a,o,r,i,c,s,l,d,f,h,y,b,w,E,k;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,o=n.call,r=n.put,i="msite"===a.from,i&&!p.a.checkLogin()&&(window.location.href="https://".concat(window.location.host,"/login.htm?return_url=").concat(encodeURIComponent(window.location.href))),c=a.mode?a.mode:"",e.next=7,r({type:"setLoading",payload:{MODEL_LOADED:!1,type:c}});case 7:return s=(new Date).getTime(),e.next=10,o(u.a,{params:JSON.stringify(a.data)});case 10:if(l=e.sent,d=l.data,f=[],"200"!==d.code&&200!==d.code){e.next=39;break}return h=(new Date).getTime(),v("listRequestTime&costTime=".concat(h-s),C),e.next=18,r({type:"formatList",payload:Object.assign({},d.data,{type:c})});case 18:if(!(d.data.list&&d.data.list.length>0)){e.next=26;break}return y=Object(m.d)(d.data.list),"messenger"===window.host&&window.EventBus.publish("im-weblite-list:updateContactList",{list:d.data.list}),e.next=23,o(u.b,{params:JSON.stringify({list:y,sceneType:"color"})});case 23:b=e.sent,w=b.data,w.data&&w.data.list&&w.data.list.length>0&&(f=Object(m.j)(d.data.list,w.data.list));case 26:return e.next=28,r({type:"mergeList",payload:{list:f,type:c}});case 28:if(a.callback&&a.callback(f),"weblite"!==window.host){e.next=37;break}return e.next=32,o(u.d);case 32:if(E=e.sent,k=E.data,200!==k.code&&"200"!==k.code){e.next=37;break}return e.next=37,r({type:"setUnread",payload:k.data&&k.data.unreadCount?k.data.unreadCount:0});case 37:e.next=40;break;case 39:"501"===d.code||501===d.code?(v("listNologin",C),a.callback&&a.callback({code:501,list:[]})):(v("listError&code=".concat(d.code,"&msg=").concat(d.message),C),g.error("".concat(d.code," (").concat(d.message,")")));case 40:case"end":return e.stop()}},e)}),loadMore:regeneratorRuntime.mark(function e(t,n){var a,o,r,i,c,s,l,p,d,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,o=n.call,r=n.put,i=a.data.pagination,e.next=5,o(u.f,{params:JSON.stringify(a.data)});case 5:return c=e.sent,s=c.data,e.next=9,r({type:"setPagination",payload:i});case 9:if(l=[],1*s.code!=200){e.next=23;break}if(!(s.data.list&&s.data.list.length>0)){e.next=22;break}return p=Object(m.d)(s.data.list),"messenger"===window.host&&window.EventBus.publish("im-weblite-list:updateContactList",{list:s.data.list}),e.next=16,o(u.g,{params:JSON.stringify({list:p})});case 16:if(d=e.sent,g=d.data,!(g.data&&g.data.list&&g.data.list.length>0)){e.next=22;break}return l=Object(m.j)(s.data.list,g.data.list),e.next=22,r({type:"formatList",payload:Object.assign({},{list:l},{pagination:i})});case 22:a.callback&&a.callback(l);case 23:case"end":return e.stop()}},e)}),selectContact:regeneratorRuntime.mark(function e(t,n){var a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,o=n.put,e.next=4,o({type:"setSelected",payload:a});case 4:window.EventBus.publish("im-weblite-list:selectedItem",a.select);case 5:case"end":return e.stop()}},e)}),activeContact:regeneratorRuntime.mark(function e(t,n){var a,r,i,c,s,l,p,d,m,g,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,r=n.call,i=n.put,c=a.loginIdEncrypt,s=void 0===c?"":c,l=a.accountId,p=void 0===l?"":l,e.next=5,r(u.c,{params:JSON.stringify({loginIdEncrypt:s,accountId:p})});case 5:if(d=e.sent,m=d.data,200!==m.code&&"200"!==m.code){e.next=18;break}return g=m.data.contactInfo||{},f=Object.assign({},g.baseInfo||{},g.extraInfo||{}),s!==f.loginIdEncrypt&&v("loginIdEncryptError",C),e.next=13,i({type:"showList",payload:{showList:!0}});case 13:return e.next=15,i({type:"insertContact",payload:{contact:f}});case 15:return e.next=17,i({type:"selectContact",payload:{select:o({},f,{fromSearch:a.fromSearch})}});case 17:a.callback&&a.callback(f);case 18:case"end":return e.stop()}},e)}),doAction:regeneratorRuntime.mark(function e(t,n){var a,r,i,c,s,p,d,f,h,y,v,b,E,k;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,r=n.call,i=n.put,c=n.select,e.next=4,c(function(e){return e.list.labelGroups});case 4:if(s=e.sent,p=a.opContext&&JSON.parse(a.opContext)||{},!(p.createLabel||"mark"===a.opType&&p&&"color"==p.markType&&-1===s.map(function(e){return e.groupDetail}).indexOf(p.markDetail))){e.next=18;break}return e.next=9,r(u.h,{params:JSON.stringify({operateType:"insert",group:{groupType:p.markType,groupDetail:p.markDetail,groupName:p.groupName||p.markDetail}})});case 9:if(d=e.sent,f=d.data,1*f.code==200){e.next=16;break}return g.error(f.message),e.abrupt("return");case 16:return e.next=18,i({type:"setLabelGroups",payload:[].concat(l()(s),[{groupType:p.markType,groupDetail:p.markDetail,groupName:p.groupName}])});case 18:return e.next=20,r(u.k,{params:JSON.stringify(a)});case 20:if(h=e.sent,y=h.data,"200"!==y.code&&200!==y.code){e.next=67;break}e.t0=a.opType,e.next="delete"===e.t0?26:"top"===e.t0?29:"untop"===e.t0?32:"block"===e.t0?35:"unblock"===e.t0?35:"mute"===e.t0?38:"unmute"===e.t0?38:"mark"===e.t0?41:"unmark"===e.t0?41:50;break;case 26:return e.next=28,i({type:"deleteContact",payload:a});case 28:return e.abrupt("break",51);case 29:return e.next=31,i({type:"pinToTop",payload:a});case 31:return e.abrupt("break",51);case 32:return e.next=34,i({type:"unTop",payload:a});case 34:return e.abrupt("break",51);case 35:return e.next=37,i({type:"changeBlock",payload:a});case 37:return e.abrupt("break",51);case 38:return e.next=40,i({type:"changeMute",payload:a});case 40:return e.abrupt("break",51);case 41:if(g.success(w.get("common.success")),"archive"!==p.markType&&"unarchive"!==p.markType){e.next=47;break}return e.next=45,i({type:"deleteContact",payload:a});case 45:e.next=49;break;case 47:return e.next=49,i({type:"markColor",payload:o({},a,{context:p})});case 49:return e.abrupt("break",51);case 50:return e.abrupt("return");case 51:return e.next=53,c(function(e){return e.list.selected});case 53:if(v=e.sent,v.accountId!==(a.list.length&&a.list[0].accountId)){e.next=64;break}return e.next=57,c(function(e){return e.list.list});case 57:return b=e.sent,e.next=60,c(function(e){return e.list.markList});case 60:E=e.sent,k=Object(m.f)(b,a.list[0].accountId),-1===k._index&&(k=Object(m.f)(E,a.list[0].accountId)),k.current&&window.EventBus&&window.EventBus.publish("im-weblite-list:setSummaryData",{contact:o({},k.current,{memberId:v.loginId,timezone:v.currentTimeZone,noProduct:!0})});case 64:a.callback&&a.callback(),e.next=68;break;case 67:g.error(y.message);case 68:case"end":return e.stop()}},e)}),messageNew:regeneratorRuntime.mark(function e(t,n){var a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,o=n.put,e.next=4,o({type:"updateSendMessage",payload:a});case 4:case"end":return e.stop()}},e)}),listFilter:regeneratorRuntime.mark(function e(t,n){var a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.payload,o=n.put,"unread"!==a.type){e.next=5;break}return e.next=5,o({type:"getUnreadList",payload:a});case 5:case"end":return e.stop()}},e)}),clearSearch:regeneratorRuntime.mark(function e(t,n){var a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,o=n.put,e.next=4,o({type:"resetSearchList",payload:a});case 4:case"end":return e.stop()}},e)}),toggleList:regeneratorRuntime.mark(function e(t,n){var a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,o=n.put,e.next=4,o({type:"showList",payload:a});case 4:case"end":return e.stop()}},e)}),setNotification:regeneratorRuntime.mark(function e(t,n){var a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,o=n.put,e.next=4,o({type:"setNoteStatus",payload:a});case 4:case"end":return e.stop()}},e)}),changeNoteStatus:regeneratorRuntime.mark(function e(t,n){var a,o,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,o=n.call,r=n.put,e.next=4,r({type:"setNoteStatus",payload:{switch:a.switch}});case 4:return e.next=6,o(u.l,{params:JSON.stringify({remindNewMsg:a.switch})});case 6:case"end":return e.stop()}},e)}),getNoteStatus:regeneratorRuntime.mark(function e(t,n){var a,o,r,i,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,o=n.call,r=n.put,e.next=4,o(u.e);case 4:if(i=e.sent,c=i.data,200!==c.code&&"200"!==c.code){e.next=10;break}return e.next=9,r({type:"setNoteStatus",payload:{switch:c.data}});case 9:a.callback&&a.callback();case 10:case"end":return e.stop()}},e)}),updateChatStatus:regeneratorRuntime.mark(function e(t,n){var a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,o=n.put,e.next=4,o({type:"setChatSize",payload:{chatSize:a.size}});case 4:case"end":return e.stop()}},e)}),toggleMenu:regeneratorRuntime.mark(function e(t,n){var a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,o=n.put,e.next=4,o({type:"changeMenuStatus",payload:a});case 4:case"end":return e.stop()}},e)}),filterBack:regeneratorRuntime.mark(function e(t,n){var a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,o=n.put,e.next=4,o({type:"resetFilterList",payload:a});case 4:case"end":return e.stop()}},e)}),queryContactGroupList:regeneratorRuntime.mark(function e(t,n){var a,o,r,i,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,o=n.call,r=n.put,e.next=4,o(u.i,{params:JSON.stringify(a.data)});case 4:if(i=e.sent,c=i.data,"200"!==c.code&&200!==c.code){e.next=17;break}if("label"!==a.scene){e.next=12;break}return e.next=10,r({type:"setLabelGroups",payload:c.data.list||[]});case 10:e.next=14;break;case 12:return e.next=14,r({type:"setContactGroups",payload:c.data.list||[]});case 14:a.callback&&a.callback(c.data.list),e.next=18;break;case 17:g.error(c.message);case 18:case"end":return e.stop()}},e)}),queryMarkContactList:regeneratorRuntime.mark(function e(t,n){var a,o,r,i,c,s,l,p,d,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,o=n.call,r=n.put,e.next=4,o(u.j,{params:JSON.stringify(a.data)});case 4:if(i=e.sent,c=i.data,"200"!==c.code&&200!==c.code){e.next=26;break}if(s=[],l=c.data.list||[],p=Object(m.d)(l),!(p.length>0)){e.next=16;break}return e.next=13,o(u.b,{params:JSON.stringify({list:p,sceneType:a.data.markType})});case 13:d=e.sent,f=d.data,f.data&&f.data.list&&f.data.list.length>0&&(s=Object(m.j)(l,f.data.list));case 16:if("group"!==a.scene){e.next=21;break}return e.next=19,r({type:"setGroupLists",payload:{list:s,key:a.data.markType+a.data.markDetail,currentPage:a.data.pagination.currentPage}});case 19:e.next=23;break;case 21:return e.next=23,r({type:"setMarkList",payload:{list:s,reset:1===a.data.pagination.currentPage}});case 23:a.callback&&a.callback(s),e.next=27;break;case 26:g.error(c.message);case 27:case"end":return e.stop()}},e)}),operateContactGroup:regeneratorRuntime.mark(function e(t,n){var a,o,r,i,c,s,p,d,m,f,h,y,v,b,E;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,o=n.call,r=n.put,i=n.select,e.next=4,o(u.h,{params:JSON.stringify(a.data)});case 4:if(c=e.sent,s=c.data,"200"!==s.code&&200!==s.code){e.next=48;break}return p=a.data.group,e.next=10,i(function(e){return e.list.labelGroups});case 10:return d=e.sent,e.next=13,i(function(e){return e.list.list});case 13:return m=e.sent,e.next=16,i(function(e){return e.list.contactGroups});case 16:f=e.sent,h=l()(d),y=l()(m),v=l()(f),b=0;case 21:if(!(b<h.length)){e.next=28;break}if(h[b].groupDetail!==p.groupDetail){e.next=25;break}return"delete"===a.data.operateType?h.splice(b,1):h[b].groupName=p.groupName,e.abrupt("break",28);case 25:b++,e.next=21;break;case 28:return e.next=30,r({type:"setLabelGroups",payload:h});case 30:if("delete"!==a.data.operateType){e.next=44;break}return y.forEach(function(e){var t=e.mark;t&&"color"===t.markType&&t.markDetail===p.groupDetail&&(e.mark={})}),e.next=34,r({type:"setList",payload:{list:y}});case 34:if(!(v.length>0)){e.next=44;break}E=0;case 36:if(!(E<v.length)){e.next=44;break}if(v[E].groupType!==p.groupType||v[E].groupDetail!==p.groupDetail){e.next=41;break}return v.splice(E,1),e.next=41,r({type:"setContactGroups",payload:v});case 41:E++,e.next=36;break;case 44:g.success(w.get("common.success")),a.callback&&a.callback(),e.next=49;break;case 48:g.error(s.message);case 49:case"end":return e.stop()}},e)}),meetingCall:regeneratorRuntime.mark(function e(t,n){var a,o,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,o=n.put,r=n.select,e.next=4,r(function(e){return e.list});case 4:return i=e.sent,!i.showList&&i.listenMeeting&&window.EventBus&&window.EventBus.publish("im-weblite-list:meetingPush",a),e.next=8,o({type:"setListenMeeting",payload:!1});case 8:case"end":return e.stop()}},e)})}}},function(e,t,n){"use strict";function a(e,t){return h(e,t).then(function(e){return e})}function o(e){return a("//".concat(y,"/message/getRecentContactList.htm"),{method:"POST",body:e})}function r(e){return a("//".concat(y,"/message/getRecentContactListExtra.htm"),{method:"POST",body:e})}function i(e){return a("//".concat(y,"/message/setRecentContactList.htm"),{method:"POST",body:e})}function c(){return h("//".concat(y,"/message/getRemindNewMsg.htm"),{method:"POST"})}function s(e){return a("//".concat(y,"/message/setRemindNewMessage.htm"),{method:"POST",body:e})}function l(e){return a("//".concat(y,"/message/getRecentContactUnreadCount.htm"),{method:"POST",body:e})}function u(e){return h("//".concat(y,"/message/getContactInfo.htm"),{method:"POST",body:e})}function p(e){return a("//".concat(y,"/message/getRecentContactList.htm"),{method:"POST",body:e})}function d(e){return a("//".concat(y,"/message/getRecentContactListExtra.htm"),{method:"POST",body:e})}function m(e){return a("//".concat(y,"/message/queryContactGroupList.htm"),{method:"POST",body:e})}function g(e){return a("//".concat(y,"/message/queryMarkContactList.htm"),{method:"POST",body:e})}function f(e){return a("//".concat(y,"/message/operateContactGroup.htm"),{method:"POST",body:e})}t.a=o,t.b=r,t.k=i,t.e=c,t.l=s,t.d=l,t.c=u,t.f=p,t.g=d,t.i=m,t.j=g,t.h=f;var h=window.IcbuIM.lib.requestHelper.request,y=window.onetalkServerDomain||"onetalk.alibaba.com"},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a={weblite:{showList:!1,showHeader:!0,showAction:!1,showMoreInfo:!0,showNotification:!0,showSearch:!1},messenger:{showList:!0,showHeader:!1,showAction:!0,showMoreInfo:!0,showNotification:!1,showSearch:!0},msite:{showList:!0,showHeader:!1,showAction:!0,showMoreInfo:!0,showNotification:!1,showSearch:!1}}},function(e,t,n){function a(e,t){if(null==e)return{};var n,a,r=o(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=n(35);e.exports=a},function(e,t,n){"use strict";function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(n,!0).forEach(function(t){k()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var r=n(9),i=n.n(r),c=n(26),s=n.n(c),l=n(2),u=n.n(l),p=n(3),d=n.n(p),m=n(4),g=n.n(m),f=n(5),h=n.n(f),y=n(7),v=n.n(y),b=n(6),w=n.n(b),E=n(1),k=n.n(E),S=n(0),C=(n.n(S),n(13)),I=(n.n(C),n(10)),_=(n.n(I),n(8)),N=n(20),x=n(14),O=window.IcbuIM.lib.log,T="/sc.ma.".concat(window.host),L=window.IcbuIM.lib.I18N.createI18N,M=L({parsePage:!0,namespace:"".concat(window.mcmsWithoutAppName?"":"intl-gangesweb.","messenger")}),A=L({parsePage:!0,namespace:"".concat(window.mcmsWithoutAppName?"":"intl-gangesweb.","onepage.ma")}),R=["red","blue","green","yellow","purple","light_green","pink","dark_blue"],P=R.concat(["archive","unarchive"]),D=function(e){function t(e){var n;return u()(this,t),n=g()(this,h()(t).call(this,e)),k()(v()(n),"selectContact",function(){O("contactClick",T);var e=n.props.item||n.props,t=e.itemData,a=void 0===t?{}:t,r=e.getCurrentHash,i=e.EventBus,c=e.extraData,l=e.selectContact,u=e.mode,p=e.redirectTo,d=a.accountId,m=a.accountIdEncrypt,g=a.name,f=a.fullPortrait,h=a.loginId,y=a.loginIdEncrypt,v=a.stayTop,b=a.currentTimeZone,w=s()(a,["accountId","accountIdEncrypt","name","fullPortrait","loginId","loginIdEncrypt","stayTop","currentTimeZone"]),E={contact:o({accountId:d,accountIdEncrypt:m,name:g,fullPortrait:f,memberId:h,loginIdEncrypt:y,stayTop:v,timezone:b,noProduct:!0},w)};if(l(Object.assign({select:o({},a,{fromSearch:!1}),mode:u})),"messenger"===window.host&&history.pushState){var k="".concat(window.location.protocol,"//").concat(window.location.host).concat(window.location.pathname,"?activeAccountId=").concat(d,"&activeAccountIdEncrypt=").concat(m);window.history.pushState({path:k},"",k)}"weblite"===window.host&&r&&"webliteList"===r()?p({appName:"webliteChat",hash:"webliteListAndChat",params:{initSummaryData:E,extraInfo:{showDefaultPage:!1,productId:c.productId,loginIdEncrypt:c.activeLoginIdEncrypt,marketInfo:{}}}}):i.publish("im-weblite-list:setSummaryData",E)}),k()(v()(n),"handleVisibleChange",function(e){e&&O("2020MC_CoversationMenu_Expand&conversationId=".concat(n.conversationId),T),n.setState({balloonVisible:e})}),k()(v()(n),"doAction",function(e){var t=n.props.item||n.props,a=t.itemData,o=t.labelGroups,r=t.setLabelGroups,c=t.currentFilterType,s=t.EventBus,l=t.doAction;if(n.setState({balloonVisible:!1}),"delete"===e)l({opType:e,list:[{accountId:a.accountId,accountIdEncrypt:a.accountIdEncrypt}]}),O("2020MC_CoversationMenu_Delete",T);else if("addLabel"===e)O("2020MC_CoversationMenu_LableColor_Add",T),n.showLabelPickDialog();else{var u=e,p={};if(-1!==P.indexOf(e)){if(u="mark","archive"===e)u="mark",p.markType="archive",-1===o.map(function(e){return e.groupType}).indexOf(e)&&(p.createLabel=!0);else if("unarchive"===e)u="unmark",p.markType="archive",p.markDetail="archive";else{var d=a.mark||{},m=d.markType,g=d.markDetail;"color"===m&&g===e?u="unmark":(u="mark",-1===o.map(function(e){return e.groupDetail}).indexOf(e)&&(p.createLabel=!0)),p.markType="color"}p.markDetail||(p.markDetail=e)}n.menuClickLog(u,p),l({opType:u,opContext:JSON.stringify(p),list:[{accountId:a.accountId,accountIdEncrypt:a.accountIdEncrypt}],callback:function(){p.createLabel&&r([].concat(i()(o),[{groupDetail:e,groupType:"archive"===e?"archive":"color",groupName:e}])),!c||"mark"!==u&&"unmark"!==u||s.publish("im-weblite-list:filterList",{type:c})}})}}),n.conversationId="enaliint".concat((e.itemData||e.item&&e.item.itemData).loginId),n.state={isSelect:!1,balloonVisible:!1},n}return w()(t,e),d()(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.itemData||this.props.item&&this.props.item.itemData||{},n=t.block,a=t.mute,r=t.loginId,i=t.EventBus,c=e.itemData||{},s=c.block,l=c.mute,u=c.loginId;r&&u&&r!==u&&(void 0!==n&&n!==s||void 0!==a&&a!==l)&&i.publish("im-weblite-list:setSummaryData",{contact:o({memberId:e.itemData.loginId,timezone:e.itemData.currentTimeZone},e.itemData)})}},{key:"menuClickLog",value:function(e,t){var n="2020MC_CoversationMenu_";if("mark"===e)"color"===t.markType?n="".concat(n,"LableColor&color=").concat(t.markDetail):"archive"===t.markType&&(n="".concat(n,"Archive"));else if("unmark"===e)"color"===t.markType?n="".concat(n,"LableColor_Cancel&color=").concat(t.markDetail):"archive"===t.markType&&(n="".concat(n,"Archive_Cancel"));else{var a="";switch(e){case"top":a="Sticky";break;case"untop":a="Sticky_Cancel";break;case"mute":a="Mute_Click";break;case"unmute":a="Mute_Cancel";break;case"block":a="Block";break;case"unblock":a="Block_Cancel"}n="".concat(n).concat(a)}O("".concat(n,"&conversationId=").concat(this.conversationId),T)}},{key:"showLabelPickDialog",value:function(){var e=this,t=this.props.item||this.props,n=t.itemData,a=t.labelGroups,o=t.currentFilterType,r=t.EventBus,i=t.doAction,c=a.filter(function(e){return"color"===e.groupType}).map(function(e){return e.groupDetail}).concat("red","blue","green"),s=R.filter(function(e){return-1===c.indexOf(e)}),l=s[0],u="";I.Dialog.confirm({content:S.createElement("div",null,S.createElement("p",null,M.get("list.labelDialog.text")||"Pick color and name it."),S.createElement("div",{className:"label-pick-content"},S.createElement(I.Select,{className:"label-pick-select",onChange:function(e){return l=e},defaultValue:s[0]},s.map(function(e){return S.createElement(I.Option,{key:e,value:e},S.createElement("span",{className:"label-pick-select-item ".concat(e)}))})),S.createElement(I.Input,{className:"label-pick-input",maxLength:20,placeholder:M.get("list.labelDialog.inputPlaceholder")||"Enter label name.",onChange:function(e){return u=e}}))),title:M.get("list.labelDialog.title")||"Creat A Label",locale:{ok:A.get("common.ok")||"OK",cancel:A.get("common.cancel")||"Cancel"},onOk:function(){O("2020MC_CoversationMenu_LableColor_Add_Submit&color=".concat(l,"&conversationId=").concat(e.conversationId),T),i({opType:"mark",opContext:JSON.stringify({markType:"color",markDetail:l,createLabel:!0,groupName:u}),list:[{accountId:n.accountId,accountIdEncrypt:n.accountIdEncrypt}],callback:function(){o&&r.publish("im-weblite-list:filterList",{type:o})}})}})}},{key:"formatContent",value:function(e){var t=this.props.item||this.props,n=t.itemData,a=n.latestMessage,o=void 0===a?{}:a;if(e=e||"",3===o.viewType){return"send"===o.messageType?M.get("youReverseTip"):M.get("reverseTip")}return N.a.formatContent(e,n.imMessageType)}},{key:"renderUnread",value:function(){var e=this.props.item||this.props,t=e.itemData,n=void 0===t?{}:t;return n.mute?n.unreadCount>0?S.createElement("div",{className:"mute-unread"}):null:n.unreadCount>0?S.createElement("div",{className:"unread-num"},n.unreadCount):null}},{key:"getHashCode",value:function(e){var t=0;if(!e)return t;for(var n=0;n<e.length;n++)t=31*t+e.charCodeAt(n),t&=4294967295;return t}},{key:"getAvatarBackground",value:function(e){return["#50E3C2","#FE5D59","#FF9A59","#FFDD59","#59DBFF","#5966FF","#59ABFD","#FE5977","#5A8EFF","#A559FF","#50E3C2","#D84C4C"][Math.abs(this.getHashCode(e)%12)]}},{key:"render",value:function(){var e=this.props.item||this.props,t=e.itemData,n=e.selected,a=e.showAction,r=e.showMoreInfo,i=e.mode,c=e.index,s=e.labelGroups,l=e.currentFilterType,u=t.latestMessage,p=void 0===u?{content:"",messageType:"",contactRead:!1}:u,d=p.content,m=p.messageType,g=p.contactRead,f=p.spamStatus,h=C("recent-list-item",{"recent-list-item-select":t.accountId===n.accountId,"recent-list-item-unread":t.unreadCount>0,"recent-list-item-pin":t.stayTop,"recent-list-with-product":t.productRelation}),y=t.block,v=t.mute,b=t.mark,w=void 0===b?{}:b,E=w.markDetail,k=C("action-container",{"balloon-trigger-active":this.state.balloonVisible}),N=S.createElement(I.Icon,{type:"ellipsis",size:"xs"}),O=Object(x.i)(s),T=_.a.getLogParams(t);return T.locationNum=c,T.host=window.host,S.createElement("div",{className:h,onClick:this.selectContact,"data-exp":"2020MC_Conversation_Show","data-clk":"2020MC_Conversation_Click","data-expInfo":JSON.stringify(o({},T,{showTime:+new Date})),"data-clkInfo":JSON.stringify(o({},T,{clickTime:+new Date}))},window.shouldShowLabel&&S.createElement("div",{className:"mark-color-line ".concat(E||"")}),S.createElement("div",{className:"portrait-container"},S.createElement("div",{className:"head-portrait"},t.fullPortrait?S.createElement("img",{src:t.fullPortrait}):S.createElement("div",{className:"letter",style:{backgroundColor:this.getAvatarBackground(t.name)}},t.name?t.name.slice(0,1):t.loginId.slice(0,1))),this.renderUnread()),S.createElement("div",{className:"contact-info-wrapper"},S.createElement("div",{className:"contact-info"},r?S.createElement("p",{className:"contact-name"},y&&S.createElement("img",{className:"block",src:"https://img.alicdn.com/tfs/TB1JSlXk4n1gK0jSZKPXXXvUXXa-14-14.png"}),S.createElement("span",{className:"name"},v&&S.createElement("img",{className:"mute",src:"https://img.alicdn.com/tfs/TB1TdVLBxz1gK0jSZSgXXavwpXa-33-36.png"}),t.name),"group"!==i&&S.createElement("span",{className:"contact-time"},_.a.timeSince(t.lastContactTime))):S.createElement("p",{className:"contact-name"},S.createElement("span",{className:"name"},v&&S.createElement("img",{className:"mute",src:"https://img.alicdn.com/tfs/TB1TdVLBxz1gK0jSZSgXXavwpXa-33-36.png"}),y&&S.createElement("img",{className:"block",src:"https://img.alicdn.com/tfs/TB1JSlXk4n1gK0jSZKPXXXvUXXa-14-14.png"}),t.name),"group"!==i&&S.createElement("span",{className:"contact-time"},_.a.timeSince(t.lastContactTime))),r?S.createElement("p",{className:"company-name"},t.companyName):null,S.createElement("div",{className:"msg-wrapper"},"group"!==i&&"rec"===m?S.createElement("div",{className:"latest-msg latest-msg-".concat(m)},S.createElement("p",null,this.formatContent(d))):null,"group"!==i&&"send"===m?S.createElement("div",{className:"latest-msg"},S.createElement("p",null,f&&0!==f?S.createElement("span",{className:"send-failed"},"!"):g?S.createElement(I.Icon,{type:"success-filling",size:"xs"}):S.createElement(I.Icon,{type:"success",size:"xs"}),this.formatContent(d))):null,r&&t.productRelation?S.createElement("div",{className:"prodcut-img-wrapper"},S.createElement("img",{src:t.productRelation})):null,a?S.createElement("div",{className:k},S.createElement(I.Balloon,{className:"contact-action-balloon",closable:!1,trigger:N,visible:this.state.balloonVisible,onVisibleChange:this.handleVisibleChange,triggerType:"click"},"archive"!==l?S.createElement(I.Menu,{onClick:this.doAction,className:"contact-action-menu",defaultOpenKeys:["label"],"data-exp":"2020MC_CoversationMenu_Show","data-expInfo":JSON.stringify({conversationId:this.conversationId})},"group"!==i&&(t.stayTop?S.createElement(I.Menu.Item,{key:"untop"},S.createElement("div",{className:"item-content"},S.createElement("div",{className:"icon-wrapper"},S.createElement("img",{className:"menu-icon",src:"https://img.alicdn.com/tfs/TB1Xc04BkY2gK0jSZFgXXc5OFXa-36-39.png"})),M.get("list.action.unPin")||"Unpin")):S.createElement(I.Menu.Item,{key:"top"},S.createElement("div",{className:"item-content"},S.createElement("div",{className:"icon-wrapper"},S.createElement("img",{className:"menu-icon",src:"https://img.alicdn.com/tfs/TB1Xc04BkY2gK0jSZFgXXc5OFXa-36-39.png"})),M.get("list.action.pin")||"Pin to Top"))),window.shouldShowLabel&&"group"!==i&&S.createElement(I.Menu.SubMenu,{label:S.createElement("div",{className:"item-content"},S.createElement("div",{className:"icon-wrapper"},S.createElement("img",{className:"menu-icon",src:"https://img.alicdn.com/tfs/TB1vxh2BkP2gK0jSZPxXXacQpXa-30-33.png"})),M.get("list.action.label")||"Label as"),key:"label",className:"label-menu"},O.map(function(e){return S.createElement(I.Menu.Item,{key:e.groupDetail,className:"label-item"},S.createElement("div",{className:"group-item-outer ".concat(e.groupDetail," ").concat(E===e.groupDetail?"selected":"")},S.createElement("div",{className:"group-item-inner ".concat(e.groupDetail)})))}),O.length<8&&S.createElement(I.Menu.Item,{key:"addLabel",className:"label-item"},S.createElement(I.Icon,{type:"add",size:"xxs"}))),window.shouldShowLabel&&(t.mark&&"archive"===t.mark.markType?S.createElement(I.Menu.Item,{key:"unarchive"},S.createElement("div",{className:"item-content"},S.createElement("div",{className:"icon-wrapper"},S.createElement("img",{className:"menu-icon",src:"https://img.alicdn.com/tfs/TB1IiGhzRr0gK0jSZFnXXbRRXXa-24-20.png"})),M.get("list.action.unarchive")||"Unarchive")):S.createElement(I.Menu.Item,{key:"archive"},S.createElement("div",{className:"item-content"},S.createElement("div",{className:"icon-wrapper"},S.createElement("img",{className:"menu-icon",src:"https://img.alicdn.com/tfs/TB1IiGhzRr0gK0jSZFnXXbRRXXa-24-20.png"})),M.get("list.action.archive")||"Archive"))),S.createElement(I.Menu.Item,{key:"delete"},S.createElement("div",{className:"item-content"},S.createElement("div",{className:"icon-wrapper"},S.createElement("img",{className:"menu-icon",src:"https://img.alicdn.com/tfs/TB1g982Bbr1gK0jSZFDXXb9yVXa-36-36.png"})),M.get("list.action.delete")||"Delete")),t.block?S.createElement(I.Menu.Item,{key:"unblock"},S.createElement("div",{className:"item-content"},S.createElement("div",{className:"icon-wrapper"},S.createElement("img",{className:"menu-icon",src:"https://img.alicdn.com/tfs/TB1gF41Boz1gK0jSZLeXXb9kVXa-36-36.png"})),M.get("list.action.unblock")||"Unblock")):S.createElement(I.Menu.Item,{key:"block"},S.createElement("div",{className:"item-content"},S.createElement("div",{className:"icon-wrapper"},S.createElement("img",{className:"menu-icon",src:"https://img.alicdn.com/tfs/TB1gF41Boz1gK0jSZLeXXb9kVXa-36-36.png"})),M.get("list.action.block")||"Block")),!window.shouldShowLabel&&S.createElement(I.Menu.Item,{key:"archive"},S.createElement("div",{className:"item-content"},S.createElement("div",{div:!0,className:"icon-wrapper"},S.createElement("img",{className:"menu-icon",src:"https://img.alicdn.com/tfs/TB1IiGhzRr0gK0jSZFnXXbRRXXa-24-20.png"})),M.get("list.action.archive")||"Archive")),t.mute?S.createElement(I.Menu.Item,{key:"unmute"},S.createElement("div",{className:"item-content"},S.createElement("div",{className:"icon-wrapper"},S.createElement("img",{className:"menu-icon",src:"https://img.alicdn.com/tfs/TB106N5Bhv1gK0jSZFFXXb0sXXa-33-39.png"})),M.get("list.action.unmute")||"Unmute")):S.createElement(I.Menu.Item,{key:"mute"},S.createElement("div",{className:"item-content"},S.createElement("div",{className:"icon-wrapper"},S.createElement("img",{className:"menu-icon",src:"https://img.alicdn.com/tfs/TB106N5Bhv1gK0jSZFFXXb0sXXa-33-39.png"})),M.get("list.action.mute")||"Mute"))):S.createElement(I.Menu,{onClick:this.doAction,className:"contact-action-menu",defaultOpenKeys:["label"],"data-exp":"2020MC_CoversationMenu_Show","data-expInfo":JSON.stringify({conversationId:this.conversationId})},S.createElement(I.Menu.Item,{key:"unarchive"},S.createElement("div",{className:"item-content"},S.createElement("div",{className:"icon-wrapper"},S.createElement("img",{className:"menu-icon",src:"https://img.alicdn.com/tfs/TB1IiGhzRr0gK0jSZFnXXbRRXXa-24-20.png"})),M.get("list.action.unarchive")||"Unarchive"))))):null))))}}]),t}(S.Component);t.a=D},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var a=n(2),o=n.n(a),r=n(3),i=n.n(r),c=n(4),s=n.n(c),l=n(5),u=n.n(l),p=n(7),d=n.n(p),m=n(6),g=n.n(m),f=n(1),h=n.n(f),y=n(0),v=(n.n(y),n(39)),b=(n.n(v),function(e){function t(e){var n;return o()(this,t),n=s()(this,u()(t).call(this,e)),h()(d()(n),"handleClick",function(){n.props.onClick()}),n}return g()(t,e),i()(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,n=t.showNotice,a=t.content;return n?y.createElement("div",{className:"top-notice-container",ref:function(t){return e.container=t},onClick:this.handleClick,"data-exp":"2020MC_JoinCallBar_Show"},y.createElement("svg",{width:"16",height:"16",xmlns:"http://www.w3.org/2000/svg"},y.createElement("g",{fill:"none",fillRule:"evenodd"},y.createElement("path",{d:"M0 0h16v16H0z"}),y.createElement("path",{d:"M14.38 1.447l-.041-.084a.378.378 0 00-.292-.125.45.45 0 00-.292.125l-.708.667c0-.208-.042-.375-.125-.5a1.268 1.268 0 00-.333-.333 1.391 1.391 0 00-.625-.125H9.672c-.292 0-.417.041-.583.125-.125.083-.25.208-.334.333-.083.167-.125.292-.125.583v2c0 .292.042.417.125.584.084.125.209.25.334.333.166.083.291.125.583.125h2.292c.291 0 .416-.042.583-.125.125-.083.25-.208.333-.333.084-.125.084-.25.125-.5l.709.666a.378.378 0 00.291.125c.042 0 .125 0 .167-.041.167-.084.25-.209.25-.417V1.697c.042-.084 0-.167-.042-.25zm-2.625 2.416H9.922V2.322h1.833l.042.791-.042.75zm.875 6c-.041-.041-.125-.083-.166-.125l-.125-.125c-.459-.416-1.167-1-2.167-.875-.667.084-1.042.5-1.333.834-.209.25-.375.375-.542.416-.25.042-.667-.291-.917-.458a8.787 8.787 0 01-1.75-1.958c-.125-.167-.416-.667-.333-1 .042-.084.208-.209.333-.292.084-.083.167-.125.25-.208l.125-.125c.292-.209.667-.542.792-1.042.25-.958-.292-1.75-.667-2.333l-.083-.125C5.672 1.822 5.005.822 3.922 1.03c-.417.083-.708.333-.958.542l-.292.25c-.167.166-.375.291-.542.5-1.125 1.25-1.416 3.166-.791 5 .416 1.25 1.208 2.5 2.333 3.708.792.875 1.875 1.958 3.292 2.708.625.334 1.458.709 2.458.709h.167c.958 0 1.75-.25 2.458-.667.208-.125.417-.333.583-.5.084-.083.167-.167.25-.208l.042-.042c.292-.25.708-.583.75-1.208.167-.959-.542-1.584-1.042-1.959zm-.416 2.125l-.042.042a1.812 1.812 0 01-.292.25 2.92 2.92 0 01-.416.333c-.542.334-1.167.5-1.917.5-.75-.041-1.375-.291-1.917-.583-1-.542-1.875-1.25-2.958-2.458-1-1.125-1.708-2.209-2.083-3.292-.5-1.375-.25-2.833.541-3.75.084-.083.25-.208.375-.333l.292-.25c.125-.125.25-.209.333-.25h.042c.25 0 .583.541.833.875l.084.125c.291.458.583.916.5 1.333-.042.125-.209.25-.375.375-.042.042-.125.083-.167.125-.042.042-.125.083-.167.125-.291.208-.666.5-.791.958-.25.875.291 1.709.5 2.042.583.875 1.208 1.625 2 2.25.375.333 1.125.917 1.916.75.584-.125.917-.5 1.209-.792.25-.25.375-.416.583-.458.417-.042.708.167 1.167.583l.166.125c.042.042.125.084.209.167.291.25.708.583.708.833 0 .125-.208.25-.333.375z",fill:"#F60",fillRule:"nonzero"}))),y.createElement("span",{className:"content"},a),y.createElement("svg",{width:"16",height:"16",xmlns:"http://www.w3.org/2000/svg"},y.createElement("g",{fill:"none",fillRule:"evenodd"},y.createElement("path",{d:"M0 0h16v16H0z"}),y.createElement("path",{d:"M9.06 7.952L4.5 3.39l.885-.883 5.441 5.444-5.442 5.439-.883-.884z",fill:"#999",fillRule:"nonzero"})))):null}}]),t}(y.Component))},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},n.apply(this,arguments)}e.exports=n},function(e,t,n){"use strict";var a=n(2),o=n.n(a),r=n(3),i=n.n(r),c=n(4),s=n.n(c),l=n(5),u=n.n(l),p=n(6),d=n.n(p),m=n(0),g=(n.n(m),n(10)),f=(n.n(g),n(46)),h=(n.n(f),function(e){function t(){return o()(this,t),s()(this,u()(t).apply(this,arguments))}return d()(t,e),i()(t,[{key:"render",value:function(){var e=this.props,t=e.content,n=void 0===t?"":t,a=e.showClose,o=e.onClose,r=e.className,i=void 0===r?"":r,c=e.children;return m.createElement("div",{className:"tip-container ".concat(i)},c||n,a&&m.createElement(g.Icon,{type:"close",className:"close",size:"xxs",onClick:o}))}}]),t}(m.Component));t.a=h},function(e,t,n){"use strict";function a(e){return i.a.createElement("div",{className:"icbu-im-im-weblite-list"},i.a.createElement(m.a,e))}Object.defineProperty(t,"__esModule",{value:!0});var o=n(32),r=(n.n(o),n(0)),i=n.n(r),c=n(33),s=n.n(c),l=n(11),u=n.n(l),p=n(15),d=n.n(p),m=n(34),g=n(23),f=n(56),h=(n.n(f),window.IcbuIM.lib.errLog),y=u()({onError:function(e){h(e)}});y.use(d()()),y.model(g.a);var v={mount:function(e){window.EventBus=e.EventBus,y.router(function(){return i.a.createElement(a,e)}),y.start(e.selector)},unmount:function(e){s.a.unmountComponentAtNode(document.querySelector(e.selector))}};window.__spaApplication__=v},function(e,t){try{window.IcbuIM||(window=win)}catch(e){console.log("==== windowTransform error:",e)}},function(e,t){e.exports=IcbuIM["react-dom"]},function(e,t,n){"use strict";function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(n,!0).forEach(function(t){k()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function r(e){return{searchList:e.list.searchList,list:e.list.list,selected:e.list.selected,mode:e.list.mode,MODEL_LOADED:e.list.MODEL_LOADED,showList:e.list.showList,notification:e.list.notification,unreadCount:e.list.unreadCount,chatSize:e.list.chatSize,showHeader:e.list.showHeader,showAction:e.list.showAction,showMoreInfo:e.list.showMoreInfo,showSearch:e.list.showSearch,pagination:e.list.pagination,filterList:e.list.filterList,markList:e.list.markList,labelGroups:e.list.labelGroups}}function i(e){return{fetchRecentContactList:function(t){e({type:"list/fetchRecentContactList",payload:t})},selectContact:function(t){e({type:"list/selectContact",payload:t}),e({type:"common/changeSelect",payload:{contact:{accountId:t.select.accountId,accountIdEncrypt:t.select.accountIdEncrypt,name:t.select.name,fullPortrait:t.select.fullPortrait,memberId:t.select.loginId},timezone:t.select.currentTimeZone,latestMessage:t.select.latestMessage}})},activeContact:function(t){e({type:"list/activeContact",payload:t})},doAction:function(t){"delete"===t.opType&&e({type:"common/changeSelect",payload:{contact:{}}}),e({type:"list/doAction",payload:t})},listFilter:function(t){e({type:"list/listFilter",payload:t})},toggleList:function(t){e({type:"list/toggleList",payload:t})},setNotification:function(t){e({type:"list/setNotification",payload:t})},changeNoteStatus:function(t){e({type:"list/changeNoteStatus",payload:t})},getNoteStatus:function(t){e({type:"list/getNoteStatus",payload:t})},updateChatStatus:function(t){e({type:"list/updateChatStatus",payload:t})},messageNew:function(t){e({type:"list/messageNew",payload:t})},listLoadMore:function(t){e({type:"list/loadMore",payload:t})},filterBack:function(){e({type:"list/filterBack"})},queryContactGroupList:function(t){e({type:"list/queryContactGroupList",payload:t})},setLabelGroups:function(t){e({type:"list/setLabelGroups",payload:t})},queryMarkContactList:function(t){e({type:"list/queryMarkContactList",payload:t})},operateContactGroup:function(t){e({type:"list/operateContactGroup",payload:t})},setMode:function(t){e({type:"list/setMode",payload:t})},resetGroupLists:function(){e({type:"list/resetGroupLists"})}}}var c=n(26),s=n.n(c),l=n(2),u=n.n(l),p=n(3),d=n.n(p),m=n(4),g=n.n(m),f=n(5),h=n.n(f),y=n(7),v=n.n(y),b=n(6),w=n.n(b),E=n(1),k=n.n(E),S=n(0),C=(n.n(S),n(11)),I=(n.n(C),n(36)),_=n(40),N=n(8),x=n(45),O=n(47),T=n(28),L=n(51),M=n(13),A=(n.n(M),n(22)),R=n(53),P=(n.n(R),n(54)),D=(n.n(P),n(10)),j=(n.n(D),n(55)),G=(n.n(j),window.IcbuIM.lib.log),q="/sc.ma.".concat(window.host),B=window.location.href.indexOf("weblite")>-1;P.config.mainDomain="alibaba.com",P.config.subDomain="h",P.config.prefix=window.mtopServerDomain||"acs";var F=window.IcbuIM.lib.I18N.createI18N,J=F({parsePage:!0,namespace:"".concat(window.mcmsWithoutAppName?"":"intl-gangesweb.","messenger")}),W=function(e){function t(e){var n;return u()(this,t),n=g()(this,h()(t).call(this,e)),k()(v()(n),"triggerGroupMenu",function(){n.setState({showGroupMenu:!n.state.showGroupMenu})}),k()(v()(n),"groupItemClick",function(e){var t=n.props,a=t.setMode,o=t.resetGroupLists,r=t.EventBus;n.setState({groupListType:e,showGroupMenu:!n.state.showGroupMenu}),"none"===e?(o(),a("default"),r.publish("im-weblite-list:changeMode","default")):(a("group"),r.publish("im-weblite-list:changeMode","group"))}),k()(v()(n),"getOnlineMeetingInfo",function(){return new Promise(function(e,t){P.request({api:"mtop.alibaba.icbu.im.aliyunmeeting.getMeetingInfos",v:"1.0",appKey:"21574054",data:{userStatus:JSON.stringify(["online"])},dataType:"json",ecode:1}).then(function(a){var o=a.data.object;if(o[0]){var r=o.sort(function(e,t){return t.validTime-e.validTime})[0],i=r.meetingUserInfoList.map(function(e){return e.userName}).join(",");n.setState({showNotice:!0,meetingMembers:i,conversation:r}),G("2020MC_JoinCallBar_Show",q),e(r)}else n.setState({showNotice:!1}),t(o)})})}),k()(v()(n),"handleJoinOnlineMeeting",function(){var e=n.props.EventBus;G("2020MC_JoinCallBar_Click",q),n.getOnlineMeetingInfo().then(function(t){var n={clientAppId:t.clientAppId,createTime:t.createTime,meetingAppId:t.meetingAppId,meetingCode:t.meetingCode,meetingDomain:t.meetingDomain,meetingToken:t.meetingToken,meetingUUID:t.meetingUUID,memberUuid:t.memberUuid};e.publish("im-weblite-chat:meetingAction",{type:"join",meetingEventInfo:n})},function(){D.Feedback.toast.prompt({content:J.get("meeting_status_ended")||"Call was ended"})})}),n.hasExposed=!1,n.state={showGroupMenu:!1,groupListType:"none",showNotice:!1,meetingMembers:"",conversation:{}},n}return w()(t,e),d()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.doAction,a=t.EventBus,o=t.activeLoginIdEncrypt,r=t.lazyInit;(0,t.queryContactGroupList)({data:{groupTypelist:["color","archive"],pagination:{currentPage:1,pageSize:8}},scene:"label"}),o&&r&&this.initSelectContact({activeLoginIdEncrypt:o}),this.getOnlineMeetingInfo().catch(function(){}),a.on("im-weblite-list:toggleList",function(t){e.props.toggleList(t)}),a.on("im-weblite-list:doAction",function(e){n(e)}),a.on("im-weblite-list:selectContact",function(t){e.initSelectContact(t)}),a.on("im-weblite-list:changeAction",function(t){e.props.doAction({opType:t.actionType,list:[{accountId:t.accountId,accountIdEncrypt:t.accountIdEncrypt}]})}),a.on("im-weblite-chat:meetingAction",function(t){9513===t.subType&&e.getOnlineMeetingInfo().catch(function(){})}),a.on("im-weblite-chat:meetingChange",function(t){"show"===t.type&&e.setState({showNotice:!1})}),a.on("im-weblite-list:update-unread-messages",function(t){e.props.messageNew(t)}),a.on("im-weblite-chat:minimizeChat",function(){e.props.updateChatStatus({size:"mini"})}),a.on("im-weblite-chat:maximizeChat",function(){e.props.updateChatStatus({size:"max"})}),a.on("im-weblite-chat:closeChat",function(){e.props.updateChatStatus({size:"close"})}),a.on("im-weblite:loginSuccess",function(){e.props.fetchRecentContactList({data:{search:{keyword:"",readStatus:"-1"},pagination:{currentPage:1,pageSize:A.a.PAGESIZE}}})}),"weblite"===window.host&&document.addEventListener("visibilitychange",function(){var t=N.a.checkLogin(),n=e.props.toggleList;"visible"===document.visibilityState&&(t||(localStorage.removeItem("im_weblite_chat_status"),localStorage.removeItem("im_weblite_list_select_id"),localStorage.removeItem("im_weblite_list_status"),n({showList:!1})))}),this.parseUrlParams4List()}},{key:"parseUrlParams4List",value:function(){var e=this,t=this.props.EventBus;if(this.props.showList){var n=N.a.getUrlVars(),a=n.activeAccountId,r=void 0===a?"":a,i=n.activeAccountIdEncrypt,c=void 0===i?"":i,l=n.activeLoginIdEncrypt,u=void 0===l?"":l,p=n.meetingEvent,d=n.contactLoginIdEncrypt;p&&(u=d),this.props.fetchRecentContactList({data:{search:{keyword:"",readStatus:"-1"},activeAccountId:r,activeAccountIdEncrypt:c,activeLoginIdEncrypt:u,pagination:{currentPage:1,pageSize:A.a.PAGESIZE}},callback:function(n){var a=n&&n.length>0?n.length:0;if(t.publish("im-weblite-list:setListInfo",{contactNum:a}),r||u){var i=n.filter&&n.filter(function(e){return e.accountId===Number(r)||e.loginIdEncrypt===u});if(i&&i.length>0&&(e.props.selectContact({select:i[0],mode:"default"}),"messenger"===window.host)){var c=i[0],l=c.accountId,p=c.accountIdEncrypt,d=c.name,m=c.fullPortrait,g=c.loginId,f=c.loginIdEncrypt,h=c.stayTop,y=c.currentTimeZone,v=s()(c,["accountId","accountIdEncrypt","name","fullPortrait","loginId","loginIdEncrypt","stayTop","currentTimeZone"]),b={contact:o({accountId:l,accountIdEncrypt:p,name:d,fullPortrait:m,memberId:g,loginIdEncrypt:f,stayTop:h,timezone:y},v)};e.props.EventBus.publish("im-weblite-list:setSummaryData",b)}}}})}}},{key:"componentWillUnmount",value:function(){this.props.EventBus.unregisterAllCallbacks()}},{key:"componentDidUpdate",value:function(){var e=this.props.list;"messenger"===window.host&&!this.hasExposed&&e&&e.length&&(this.hasExposed=!0,window.performance&&window.performance.timing&&G("firstScreen&costTime=".concat(Date.now()-window.performance.timing.navigationStart),"/sc.ma.messenger"))}},{key:"initSelectContact",value:function(e){var t=this,n=this.props,a=n.list,o=void 0===a?[]:a,r=n.EventBus,i=n.toggleList;r.publish("im-weblite-list:changeListStatus",{status:"expand"}),i({showList:!0}),o.length>0?this.setSelect(o,e):this.props.fetchRecentContactList({data:{search:{keyword:"",readStatus:"-1"},pagination:{currentPage:1,pageSize:A.a.PAGESIZE}},callback:function(n){t.setSelect(n,e)}})}},{key:"activeChat",value:function(e,t){"weblite"===window.host?this.props.redirectTo({appName:"webliteChat",hash:"webliteListAndChat",params:{initSummaryData:e,extraInfo:o({showDefaultPage:!1,loginIdEncrypt:t.activeLoginIdEncrypt},t)}}):"messenger"===window.host&&this.props.EventBus.publish("im-weblite-list:setSummaryData",e)}},{key:"setSelect",value:function(){var e,t,n=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.props,c=i.selectContact,s=i.activeContact,l=r.activeLoginIdEncrypt,u=void 0===l?"":l,p=r.loginIdEncrypt,d=void 0===p?"":p,m=r.accountId,g=r.searchTimeStamp;e=a.filter(function(e){return e.loginIdEncrypt===u||e.accountId===Number(m)}),e.length>0?(c({select:o({},e[0],{fromSearch:!!r.fromSearch})}),e[0]=o({},e[0],{},r),t={contact:o({accountId:e[0].accountId,accountIdEncrypt:e[0].accountIdEncrypt,name:e[0].name,fullPortrait:e[0].fullPortrait,memberId:e[0].loginId,loginIdEncrypt:e[0].loginIdEncrypt,stayTop:e[0].stayTop,timezone:e[0].currentTimeZone,searchTimeStamp:g},e[0])},this.activeChat(t,r)):s({loginIdEncrypt:u||d,accountId:m,fromSearch:!!r.fromSearch,callback:function(e){t={contact:o({accountId:e.accountId,accountIdEncrypt:e.accountIdEncrypt,name:e.name,fullPortrait:e.fullPortrait,memberId:e.loginId,loginIdEncrypt:e.loginIdEncrypt,stayTop:e.stayTop,timezone:e.currentTimeZone,searchTimeStamp:g},e)},n.activeChat(t,r)}})}},{key:"render",value:function(){var e=this.props,t=e.fetchRecentContactList,n=e.list,a=e.searchList,o=e.markList,r=e.selected,i=e.selectContact,c=e.doAction,s=e.mode,l=e.MODEL_LOADED,u=e.redirectTo,p=e.showList,d=e.toggleList,m=e.EventBus,g=e.getCurrentHash,f=e.notification,h=e.changeNoteStatus,y=e.unreadCount,v=e.activeLoginIdEncrypt,b=e.productId,w=e.getNoteStatus,E=e.showHeader,k=e.showSearch,C=e.showAction,N=e.showMoreInfo,A=e.listFilter,P=e.getCurrentAppNames,D=e.isPWA,j=e.pagination,G=e.listLoadMore,q=e.filterList,F=e.filterBack,J=e.labelGroups,W=e.setLabelGroups,X=e.queryMarkContactList,H=e.operateContactGroup,U=e.setMode,z=this.state,V=z.groupListType,K=z.showGroupMenu,Z=z.showNotice,Y=z.meetingMembers,Q=window.isUpdatePWA?{"recent-contact-container":!0,"weblite-list":B,"messenger-list":R.isMessenger}:{"recent-contact-container":!0,"weblite-list":B||D,"messenger-list":!B&&!D},$=M(Q);return S.createElement("div",{className:$},k?S.createElement(x.a,{filterBack:F,mode:s,fetchRecentContactList:t,listFilter:A,EventBus:m,triggerGroupMenu:this.triggerGroupMenu,showGroupMenu:K,groupListType:V}):null,"messenger"===window.host&&S.createElement(T.a,{showNotice:Z,content:"".concat(Y," is on the call, click to join"),onClick:this.handleJoinOnlineMeeting}),window.shouldShowLabel&&"messenger"===window.host&&K&&S.createElement(L.a,{coverClick:this.triggerGroupMenu,itemClick:this.groupItemClick}),window.shouldShowLabel&&"messenger"===window.host&&J.length>0&&"none"===V&&S.createElement(O.a,{labelGroups:J,EventBus:m,operateContactGroup:H,listFilter:A}),"none"===V&&S.createElement("div",{className:"contacts-wrapper"},S.createElement(I.a,{showMeetingNotice:"weblite"===window.host&&Z,meetingNoticeContent:"".concat(Y," is on the call, click to join"),onMeetingNoticeClick:this.handleJoinOnlineMeeting,filterList:q,markList:o,listLoadMore:G,pagination:j,isPWA:D,showHeader:E,showSearch:k,showAction:C,showMoreInfo:N,redirectTo:u,EventBus:m,getCurrentHash:g,getCurrentAppNames:P,MODEL_LOADED:l,mode:s,setMode:U,list:n,searchList:a,labelGroups:J,setLabelGroups:W,selected:r,selectContact:i,fetchRecentContactList:t,queryMarkContactList:X,doAction:c,showList:p,toggleList:d,changeNoteStatus:h,unreadCount:y,notification:f,extraData:{activeLoginIdEncrypt:v,productId:b},getNoteStatus:w})),"none"!==V&&S.createElement(_.a,{type:V,isPWA:D,showAction:C,redirectTo:u,EventBus:m,mode:s,selected:r,selectContact:i,doAction:c,extraData:{activeLoginIdEncrypt:v,productId:b},labelGroups:J,setLabelGroups:W,showMoreInfo:N}))}}]),t}(S.Component);t.a=Object(C.connect)(r,i)(W)},function(e,t){function n(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}e.exports=n},function(e,t,n){"use strict";function a(){return(window.registerTime&&parseFloat(window.registerTime))<15646752e5}var o=n(9),r=n.n(o),i=n(2),c=n.n(i),s=n(3),l=n.n(s),u=n(4),p=n.n(u),d=n(5),m=n.n(d),g=n(7),f=n.n(g),h=n(6),y=n.n(h),v=n(1),b=n.n(v),w=n(0),E=(n.n(w),n(10)),k=(n.n(E),n(27)),S=n(37),C=n(22),I=n(38),_=n(28),N=n(21),x=(n.n(N),window.IcbuIM.lib.I18N.createI18N),O=x({parsePage:!0,namespace:"".concat(window.mcmsWithoutAppName?"":"intl-gangesweb.","messenger.list")}),T=function(e){function t(e){var n;return c()(this,t),n=p()(this,m()(t).call(this,e)),b()(f()(n),"fetchMarkContactList",function(e){(0,n.props.queryMarkContactList)({data:{markType:"archive"===e?e:"color",markDetail:e,markStatus:"available",pagination:{currentPage:n.markListPageNum++,pageSize:C.a.PAGESIZE}},scene:"label",callback:function(e){e.length>0?n.endScroll=!0:n.endScroll=!1}})}),b()(f()(n),"checkMore",function(){var e=n.props.pagination;n.props.listLoadMore({data:{search:{keyword:"",readStatus:"-1"},pagination:{currentPage:e.currentPage+1,pageSize:C.a.PAGESIZE}},callback:function(e){e.length>0?n.endScroll=!0:n.endScroll=!1}})}),n.perfSend=!1,n.endScroll=!0,n.markListPageNum=1,n}return y()(t,e),l()(t,[{key:"componentDidMount",value:function(){var e=this;this.loadMoreBox.addEventListener("scroll",this.scrollFunction.bind(this)),this.props.EventBus.on("im-weblite-list:filterList",function(t){e.markListPageNum=1,t.type&&"all"!==t.type?(e.markType=t.type,e.fetchMarkContactList(t.type)):(e.markType="",e.props.setMode("default"))}),setTimeout(function(){var t=localStorage.getItem("log_unreadTime");if(!t||Date.now()-t>864e5){localStorage.setItem("log_unreadTime",Date.now());var n=e.props.list,a=0,o=0,r=0,i=0,c=0,s=n.length;n.map(function(e){e.mute||e.block||(a+=e.unreadCount,e.unreadCount>0&&r++),e.mute&&(o+=e.unreadCount,e.unreadCount>0&&i++),e.productRelation&&c++}),Object(I.a)("2020MC_Message_States&single=".concat(a,"_").concat(o,"_").concat(r,"_").concat(i,"_").concat(c,"_-1_").concat(s))}},6e4)}},{key:"scrollBottom",value:function(){this.loadMoreBox.scrollTop=this.loadMoreBox.scrollHeight-this.loadMoreBox.offsetHeight}},{key:"scrollFunction",value:function(){"filter"!==this.props.mode&&this.loadMoreBox.scrollHeight-this.loadMoreBox.offsetHeight-this.loadMoreBox.scrollTop<10&&this.endScroll&&(this.endScroll=!1,"mark"===this.props.mode?this.fetchMarkContactList(this.markType):this.checkMore())}},{key:"checkIfGetList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.props.list;this.props.isPWA&&!window.isUpdatePWA&&this.props.toggleList({showList:!0}),localStorage.removeItem("im_weblite_chat_status"),localStorage.removeItem("im_weblite_list_select_id"),localStorage.removeItem("im_weblite_list_status"),t.length||this.props.fetchRecentContactList({data:{search:{keyword:"",readStatus:"-1"},pagination:{currentPage:1,pageSize:C.a.PAGESIZE}},callback:function(t){e.callback&&e.callback(t)}})}},{key:"getNodataText",value:function(){switch(this.props.mode){case"filter":return O.get("unread.noData");case"default":return w.createElement("p",null,O.get("noData"));default:return O.get("noData")}}},{key:"getList",value:function(e){var t=this.props,n=t.list,a=void 0===n?[]:n,o=t.filterList,r=void 0===o?[]:o,i=t.markList,c=void 0===i?[]:i;switch(e){case"mark":return c;case"filter":return r;case"default":default:return a}}},{key:"topSelected",value:function(e,t){for(var n=r()(t),a=0;a<n.length;a++)if(n[a].accountId===e.accountId){for(var o=n.splice(a,1)[0],i=0;i<n.length;i++)if(!n[i].stayTop){n.splice(i,0,o);break}break}return n}},{key:"render",value:function(){var e=this,t=this.props,n=t.selected,o=t.selectContact,r=t.doAction,i=t.mode,c=t.redirectTo,s=t.toggleList,l=t.showList,u=t.EventBus,p=t.getCurrentHash,d=t.unreadCount,m=t.changeNoteStatus,g=t.notification,f=t.extraData,h=t.getNoteStatus,y=t.showHeader,v=t.showMoreInfo,b=t.showAction,C=t.getCurrentAppNames,I=t.isPWA,N=t.labelGroups,x=t.setLabelGroups,T=this.getList(i);return n&&n.fromSearch&&(T=this.topSelected(n,T)),w.createElement("div",{className:"contact-list-container"},y?w.createElement(S.a,{isPWA:I,selected:n,selectContact:o,getNoteStatus:h,checkIfGetList:this.checkIfGetList.bind(this),notification:g,changeNoteStatus:m,unreadCount:d,toggleList:s,redirectTo:c,EventBus:u,getCurrentHash:p,showList:l}):null,w.createElement("div",{className:"contact-list-content",style:{display:l?"block":"none"}},w.createElement(_.a,{showNotice:this.props.showMeetingNotice,content:this.props.meetingNoticeContent,onClick:this.props.onMeetingNoticeClick}),w.createElement(E.Loading,{className:"loading-box",visible:!this.props.MODEL_LOADED,shape:"fusion-reactor"},w.createElement("div",{className:"loadmore-box",ref:function(t){return t&&(e.loadMoreBox=t)}},T.length>0?w.createElement("div",null,w.createElement("ul",{className:"recent-list"},T.map(function(t,a){return w.createElement(k.a,{isPWA:I,showAction:b,showMoreInfo:v,redirectTo:c,EventBus:u,getCurrentHash:p,getCurrentAppNames:C,mode:i,selected:n,key:"".concat(t.accountId),selectContact:o,itemData:t,doAction:r,extraData:f,labelGroups:N,setLabelGroups:x,currentFilterType:e.markType,index:a})})),a()&&"mark"!==i&&w.createElement("div",{className:"buyingleads-tip",dangerouslySetInnerHTML:{__html:O.get("searchtip4leads")}})):w.createElement("div",{className:"list-no-data"},w.createElement("div",null,w.createElement("img",{className:"nodata-img",src:"https://img.alicdn.com/tfs/TB1iqjLvpzqK1RjSZFoXXbfcXXa-360-360.png"})),w.createElement("div",{className:"nodata-text"},this.getNodataText()),a()&&"mark"!==i&&w.createElement("div",{className:"buyingleads-tip",dangerouslySetInnerHTML:{__html:O.get("buyingleadsTip")}}))))))}}]),t}(w.Component);b()(T,"defaultProps",{list:[],selected:{}}),t.a=T},function(e,t,n){"use strict";var a=n(2),o=n.n(a),r=n(3),i=n.n(r),c=n(4),s=n.n(c),l=n(5),u=n.n(l),p=n(7),d=n.n(p),m=n(6),g=n.n(m),f=n(1),h=n.n(f),y=n(0),v=(n.n(y),n(13)),b=(n.n(v),n(10)),w=(n.n(b),n(8)),E=n(21),k=(n.n(E),window.IcbuIM.lib.log),S=window.IcbuIM.lib.I18N.createI18N,C=b.Balloon.Tooltip,I=S({parsePage:!0,namespace:"".concat(window.mcmsWithoutAppName?"":"intl-gangesweb.","messenger.weblite")}),_=S({parsePage:!0,namespace:"".concat(window.mcmsWithoutAppName?"":"intl-gangesweb.","messenger")}),N=function(e){function t(e){var n;return o()(this,t),n=s()(this,u()(t).call(this,e)),h()(d()(n),"handleVisibleChange",function(e){k("clickHeaderAction","/sc.ma.weblite"),e&&!n.state.notificationRequest&&n.props.getNoteStatus({callback:function(){n.setState({notificationRequest:!0})}}),n.setState({balloonVisible:e})}),h()(d()(n),"jumpeMsgSearch",function(e){e&&e.stopPropagation();var t=n.props.selected;k("2020MC_Lite_Search_Click","/sc.ma.weblite");var a="https://message.alibaba.com/message/messenger.htm";if(t){var o=t.accountIdEncrypt,r=t.accountId;window.open("".concat(a,"??activeAccountId=").concat(r,"&activeAccountIdEncrypt=").concat(o))}else window.open(a)}),n.state={balloonVisible:!1,notificationRequest:!1},n}return g()(t,e),i()(t,[{key:"componentDidMount",value:function(){w.a.checkLogin()?this.props.checkIfGetList():(localStorage.removeItem("im_weblite_chat_status"),localStorage.removeItem("im_weblite_list_select_id"),localStorage.removeItem("im_weblite_list_status"))}},{key:"toggleList",value:function(){var e=this.props,t=e.showList,n=e.checkIfGetList,a=e.isPWA,o=e.getCurrentHash;if(!a||window.isUpdatePWA){if(!t){if(!w.a.checkLogin())return k("clickHeader|noLogin","/sc.ma.weblite"),void window.EventBus.publish("weblite:notLogin");n({callback:function(e){if(501===e.code)return void window.EventBus.publish("weblite:notLogin")}})}t||"weblite"===window.host&&o&&"webliteList"===o()&&this.props.redirectTo({appName:"webliteChat",hash:"webliteListAndChat",params:{extraInfo:{showDefaultPage:!0}}});k(t?"hideList":"showList","/sc.ma.weblite"),t||k("2020MC_Lite_Entrance_Click","/sc.ma.weblite"),k(t?"2020MC_Lite_Minimize":"2020MC_Lite_Window_Show","/sc.ma.weblite"),this.props.toggleList({showList:!t})}}},{key:"toggleNotification",value:function(e){k(e?"noteSwitchOn":"noteSwitchOff","/sc.ma.weblite"),this.props.changeNoteStatus({switch:e})}},{key:"render",value:function(){var e=this.props,t=e.showList,n=e.unreadCount,a=e.isPWA,o=document.cookie,r=o&&-1!==o.indexOf("sign=y"),i=v("contact-list-header",{"contact-list-header-fold":!t,"contact-online":r}),c=v("header-action-container",{"balloon-trigger-active":this.state.balloonVisible});return y.createElement("div",{className:i,onClick:this.toggleList.bind(this),"data-exp":"2020MC_Lite_Entrance_Show"},y.createElement("div",{className:"comment-wrapper"},y.createElement("img",{className:"comments-icon",src:"https://img.alicdn.com/tfs/TB1rop4B9f2gK0jSZFPXXXsopXa-54-48.png"}),r?y.createElement("span",{className:"online-tag"}):null),y.createElement("span",null,I.get("enter.name")),n>0?y.createElement("span",{className:"unread-count"},n):null,!t||a||window.isUpdatePWA?null:y.createElement("div",{className:"fold-down-wrapper"},y.createElement(C,{align:"b",className:"weblite-tips-wrapper",trigger:y.createElement(b.Icon,{className:"fold-search",type:"search",size:"xs",onClick:this.jumpeMsgSearch.bind(this)}),text:_.get("lite.tips.search")}),y.createElement(C,{align:"b",className:"weblite-tips-wrapper",trigger:y.createElement(b.Icon,{className:"fold-down",type:"close",size:"xs"}),text:_.get("lite.tips.close")})),!t&&r?y.createElement("div",{className:c},y.createElement(b.Icon,{className:"fold-up",type:"arrow-up-filling",size:"xl"})):null)}}]),t}(y.Component);t.a=N},function(e,t,n){"use strict";function a(e){if("weblite"===window.host){if(window.goldlog&&window.goldlog.record)return void window.goldlog.record("/sc.ma.weblite","CLK","st_page_id=".concat(window.pageId,"&ext=").concat(encodeURIComponent(e)),"GET")}else o(e,"/sc.ma.messenger")}t.a=a;var o=window.IcbuIM.lib.log},function(e,t){},function(e,t,n){"use strict";function a(e){return{contactGroups:e.list.contactGroups,groupLists:e.list.groupLists}}function o(e){return{queryContactGroupList:function(t){e({type:"list/queryContactGroupList",payload:t})},queryMarkContactList:function(t){e({type:"list/queryMarkContactList",payload:t})},operateContactGroup:function(t){e({type:"list/operateContactGroup",payload:t})}}}var r=n(29),i=n.n(r),c=n(2),s=n.n(c),l=n(3),u=n.n(l),p=n(4),d=n.n(p),m=n(5),g=n.n(m),f=n(6),h=n.n(f),y=n(0),v=(n.n(y),n(11)),b=(n.n(v),n(10)),w=(n.n(b),n(41)),E=n(21),k=(n.n(E),function(e){function t(e){var n;return s()(this,t),n=d()(this,g()(t).call(this,e)),n.state={loading:!1},n}return h()(t,e),u()(t,[{key:"componentDidMount",value:function(){this.queryGroupList(this.props.type)}},{key:"componentWillReceiveProps",value:function(e){this.props.type!==e.type&&this.queryGroupList(e.type)}},{key:"queryGroupList",value:function(e){var t=this;this.setState({loading:!0}),this.props.queryContactGroupList({data:{groupTypelist:[e],pagination:{currentPage:1,pageSize:50}},scene:"group",callback:function(){t.setState({loading:!1})}})}},{key:"render",value:function(){var e=this.props,t=e.contactGroups,n=e.groupLists,a=e.queryMarkContactList,o=e.isPWA,r=e.showAction,c=e.EventBus,s=e.mode,l=e.selected,u=e.selectContact,p=e.doAction,d=e.extraData,m=e.labelGroups,g=e.setLabelGroups,f=e.operateContactGroup,h=e.showMoreInfo;return y.createElement("div",{className:"group-list-container"},y.createElement(b.Loading,{className:"loading-box",visible:this.state.loading,shape:"fusion-reactor"},t.map(function(e){return y.createElement(w.a,i()({},e,{key:e.groupDetail,groupLists:n,queryMarkContactList:a,isPWA:o,showAction:r,EventBus:c,mode:s,selected:l,selectContact:u,doAction:p,extraData:d,labelGroups:m,setLabelGroups:g,operateContactGroup:f,showMoreInfo:h}))})))}}]),t}(y.Component));t.a=Object(v.connect)(a,o)(k)},function(e,t,n){"use strict";var a=n(2),o=n.n(a),r=n(3),i=n.n(r),c=n(4),s=n.n(c),l=n(5),u=n.n(l),p=n(7),d=n.n(p),m=n(6),g=n.n(m),f=n(1),h=n.n(f),y=n(0),v=(n.n(y),n(10)),b=(n.n(v),n(42)),w=n.n(b),E=n(27),k=n(22),S=window.IcbuIM.lib.log,C="/sc.ma.".concat(window.host),I=window.IcbuIM.lib.I18N.createI18N,_=I({parsePage:!0,namespace:"".concat(window.mcmsWithoutAppName?"":"intl-gangesweb.","messenger.list")}),N=I({parsePage:!0,namespace:"".concat(window.mcmsWithoutAppName?"":"intl-gangesweb.","onepage.ma")}),x=function(e){function t(e){var n;return o()(this,t),n=s()(this,u()(t).call(this,e)),h()(d()(n),"arrowClick",function(){S("".concat(n.state.showList?"2020MC_ConversationGroup_FoldSubGroup":"2020MC_ConversationGroup_ExpandSubGroup","&groupType=").concat(n.props.groupType),C),n.setState({showList:!n.state.showList})}),h()(d()(n),"fetchMarkContactList",function(e){var t=n.props,a=t.queryMarkContactList,o=t.groupLists,r=t.groupType,i=t.groupDetail,c=o[r+i];a({data:{markType:r,markDetail:i,markStatus:"available",pagination:{currentPage:c&&c.currentPage||1,pageSize:k.a.PAGESIZE}},scene:"group",callback:function(t){var n=t.length<k.a.PAGESIZE;"function"==typeof e&&e(n)}})}),h()(d()(n),"editName",function(e){e.stopPropagation();var t=n.props,a=t.groupType,o=t.groupDetail,r=t.operateContactGroup,i="";v.Dialog.confirm({className:"list-label-dialog",content:y.createElement(v.Input,{className:"label-pick-input",maxLength:20,placeholder:_.get("list.labelDialog.inputPlaceholder")||"Enter label name.",onChange:function(e){return i=e}}),title:_.get("editNameTip.title")||"改名",locale:{ok:N.get("common.ok")||"OK",cancel:N.get("common.cancel")||"Cancel"},onOk:function(){i&&r({data:{operateType:"update",group:{groupType:a,groupDetail:o,groupName:i}},callback:function(){n.setState({tempGroupName:i})}})}})}),h()(d()(n),"disbandGroup",function(e){e.stopPropagation();var t=n.props,a=t.groupType,o=t.groupDetail,r=t.groupName,i=t.operateContactGroup;v.Dialog.confirm({className:"list-label-dialog",content:_.get("disbandGroupTip.content",{groupName:r})||"移除后所有会话将会被释放，确认要移除吗？",title:_.get("disbandGroupTip.title")||"确认移除",locale:{ok:N.get("common.ok")||"OK",cancel:N.get("common.cancel")||"Cancel"},onOk:function(){i({data:{operateType:"delete",group:{groupType:a,groupDetail:o,groupName:r}}})}})}),n.ContactList=w()(E.a),n.state={showList:!1,tempGroupName:""},n}return g()(t,e),i()(t,[{key:"componentDidUpdate",value:function(){var e=this.props,t=e.groupLists,n=e.groupType,a=e.groupDetail,o=t[n+a];this.state.showList&&!o&&this.fetchMarkContactList(n,a)}},{key:"render",value:function(){var e=this.props,t=e.groupLists,n=e.groupType,a=e.groupDetail,o=e.groupName,r=e.isPWA,i=e.showAction,c=e.EventBus,s=e.mode,l=e.selected,u=e.selectContact,p=e.doAction,d=e.extraData,m=e.labelGroups,g=e.setLabelGroups,f=e.showMoreInfo,h=t[n+a],b=(h||[]).map(function(e,t){return{itemData:e,index:t,isPWA:r,showAction:i,EventBus:c,mode:s,selected:l,selectContact:u,doAction:p,extraData:d,labelGroups:m,setLabelGroups:g,showMoreInfo:f}}),w=this.ContactList;return y.createElement("div",{className:"group-item"},y.createElement("div",{className:"group-bar",onClick:this.arrowClick},y.createElement("div",{className:"mark-color-line ".concat(a||"")}),y.createElement("p",{className:"group-name"},this.state.tempGroupName||o),"color"===n&&y.createElement(v.Icon,{type:"edit",size:"xs",className:"operate-icon",onClick:this.editName}),"color"===n&&y.createElement(v.Icon,{type:"ashbin",size:"xs",className:"operate-icon",onClick:this.disbandGroup}),y.createElement("div",{className:"placeholder"}),y.createElement(v.Icon,{className:"arrow",size:"small",type:"arrow-".concat(this.state.showList?"up":"down")})),this.state.showList&&y.createElement(v.Loading,{className:"loading-box",visible:!h,shape:"fusion-reactor"},y.createElement("div",{className:"list-wrapper",style:{height:b.length>20?"1800px":"auto"}},h&&0===h.length?y.createElement("p",{className:"no-contact"},_.get("noContact")||"No contact."):y.createElement(w,{list:b,loadDirection:"down",initFetch:!1,loadFunc:this.fetchMarkContactList}))))}}]),t}(y.Component);t.a=x},function(e,t,n){"use strict";e.exports=n(43)},function(e,t,n){"use strict";var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),o=this&&this.__assign||Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},r=this&&this.__rest||function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&(n[a[o]]=e[a[o]]);return n};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);n(44);var c=10,s=function(e){return function(t){function n(e){var n=t.call(this,e)||this;return n.scrollFunction=function(){"up"===n.props.loadDirection?n.loadMoreBox.scrollTop<c&&n.endScroll&&(n.endScroll=!1,n.loadMore()):n.loadMoreBox.scrollHeight-n.loadMoreBox.offsetHeight-n.loadMoreBox.scrollTop<c&&n.endScroll&&(n.endScroll=!1,n.loadMore())},n.endScroll=!0,n}return a(n,t),n.prototype.componentDidMount=function(){this.props.initFetch&&this.loadMore(),this.loadMoreBox.addEventListener("scroll",this.scrollFunction,!0),this.setScrollTo()},n.prototype.componentDidUpdate=function(){this.setScrollTo()},n.prototype.componentWillUnmount=function(){this.loadMoreBox.removeEventListener("scroll",this.scrollFunction,!0)},n.prototype.setScrollTo=function(){var e=this.props,t=e.scrollTo,n=e.loadDirection,a=e.list,o=e.onScrollTo;"end"===t?this.loadMoreBox.scrollTop=this.loadMoreBox.scrollHeight-this.loadMoreBox.offsetHeight-("up"===n?0:15):"start"===t&&(this.loadMoreBox.scrollTop="up"===n?15:0),o&&o(t||"",a)},n.prototype.loadMore=function(){var e=this,t=0;new Promise(function(n,a){e.props.loadFunc(function(t){t&&e.loadMoreBox.removeEventListener("scroll",e.scrollFunction,!0),n()}),t=window.setTimeout(function(){throw e.endScroll=!0,"load more timeout!"},1e4)}).then(function(){e.endScroll=!0,clearTimeout(t)}).catch(function(t){e.endScroll=!0})},n.prototype.render=function(){var t=this,n=this.props,a=n.list,c=n.onChange,s=r(n,["list","onChange"]);return i.createElement("div",{ref:function(e){return e&&(t.loadMoreBox=e)},className:"common-load-more"},a.map(function(n,a){return i.createElement(e,o({key:n.__key||a,item:n},s,{onChange:c&&c.bind(t,n)}))}))},n}(i.Component)};t.default=s},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",function(){return I});var a=n(2),o=n.n(a),r=n(3),i=n.n(r),c=n(4),s=n.n(c),l=n(5),u=n.n(l),p=n(7),d=n.n(p),m=n(6),g=n.n(m),f=n(1),h=n.n(f),y=n(0),v=(n.n(y),n(10)),b=(n.n(v),n(30)),w=window.IcbuIM.lib.I18N.createI18N,E=window.IcbuIM.lib.log,k="/sc.ma.".concat(window.host),S=w({parsePage:!0,namespace:"".concat(window.mcmsWithoutAppName?"":"intl-gangesweb.","messenger.list")}),C=function(){var e=0;return function(t,n){clearTimeout(e),e=setTimeout(t,n)}}(),I=function(e){function t(e){var n;return o()(this,t),n=s()(this,u()(t).call(this,e)),h()(d()(n),"activateInput",function(){window.messageSearchOpen?E("2020MC_SearchMessages_Click",k):E("focusSearch",k),n.setState({activeInput:!0})}),h()(d()(n),"clearInput",function(){E("clearSearch",k),n.setState({searchWord:""}),n.props.EventBus.publish("im-weblite-list:handleSearch",{keyword:""})}),h()(d()(n),"exitSearch",function(){n.props.EventBus.publish("messenger:exitSearch")}),h()(d()(n),"handleVisibleChange",function(){var e=n.props.showGroupMenu?"hide":"show";E("2020MC_ConversationGroup_Click&action=".concat(e),k),n.props.triggerGroupMenu()}),h()(d()(n),"focusSearch",function(){n.props.EventBus.publish("im-weblite-list:focusSearch")}),h()(d()(n),"handleSearch",function(e){n.setState({searchWord:e}),C(function(){n.props.EventBus.publish("im-weblite-list:handleSearch",{keyword:e.trim?e.trim():e})},500)}),n.state={activeInput:!1,searchWord:""},n}return g()(t,e),i()(t,[{key:"componentDidMount",value:function(){var e=this;this.props.EventBus.on("im-weblite-list:exitSearch",function(){e.setState({activeInput:!1})}),this.props.EventBus.on("im-weblite-list:inputSearchWord",function(t){e.setState({searchWord:t})})}},{key:"render",value:function(){return y.createElement("div",{className:"search-container"},this.state.activeInput?y.createElement("div",{className:"search-input-container"},y.createElement("div",{className:"input-wrapper"},y.createElement(v.Icon,{type:"search",size:"small"}),y.createElement(v.Input,{id:"im-search-input",value:this.state.searchWord,autoFocus:!0,onFocus:this.focusSearch,onChange:this.handleSearch,placeholder:S.get("search.title"),hasClear:!0})),y.createElement("div",{className:"clear-trigger tips-wrapper"},y.createElement(v.Icon,{type:"close",size:"small",onClick:this.exitSearch}))):y.createElement("div",{className:"search-background"},y.createElement("div",{className:"input-wrapper",onClick:this.activateInput},y.createElement(v.Icon,{type:"search",size:"small",style:{marginRight:"5px"}}),y.createElement("span",null,S.get("search.title"))),y.createElement("div",{className:"filter-trigger tips-wrapper",onClick:this.handleVisibleChange},y.createElement("div",{className:"icon-wrapper ".concat(this.props.showGroupMenu?"active":""," ").concat(this.props.groupListType)}),!this.props.showGroupMenu&&y.createElement(b.a,{content:S.get("search.filter")||"Filter"}))))}}]),t}(y.Component)},function(e,t){},function(e,t,n){"use strict";var a=n(9),o=n.n(a),r=n(2),i=n.n(r),c=n(3),s=n.n(c),l=n(4),u=n.n(l),p=n(5),d=n.n(p),m=n(7),g=n.n(m),f=n(6),h=n.n(f),y=n(1),v=n.n(y),b=n(0),w=(n.n(b),n(30)),E=n(48),k=n(50),S=(n.n(k),window.IcbuIM.lib.log),C="/sc.ma.".concat(window.host),I=window.IcbuIM.Next.Icon,_=window.IcbuIM.lib.I18N.createI18N,N=_({parsePage:!0,namespace:"".concat(window.mcmsWithoutAppName?"":"intl-gangesweb.","messenger.list")}),x={archive:"https://img.alicdn.com/tfs/TB1ptp_zFY7gK0jSZKzXXaikpXa-40-32.png",unread:"https://img.alicdn.com/tfs/TB1HatMFXP7gK0jSZFjXXc5aXXa-48-45.png"},O=function(e){function t(e){var n;return i()(this,t),n=u()(this,d()(t).call(this,e)),v()(g()(n),"onMenuClick",function(){S("2020MC_Conversation_QuickFilter_Setting",C),n.setState({showMenu:!n.state.showMenu})}),v()(g()(n),"onCloseGuide",function(){n.setState({hasShowGuide:"true"}),localStorage.setItem("show_filter_bar_guide","true")}),n.showGuideTimer=null,n.state={currentFilter:"",showMenu:!1,hasShowGuide:localStorage.getItem("show_filter_bar_guide")},n}return h()(t,e),s()(t,[{key:"componentDidMount",value:function(){this.checkGuide()}},{key:"componentDidUpdate",value:function(){this.checkGuide()}},{key:"checkGuide",value:function(){var e=this;this.state.hasShowGuide||this.showGuideTimer||(this.showGuideTimer=setTimeout(function(){e.onCloseGuide()},5e3))}},{key:"onFilterClick",value:function(e){"color"===e.groupType?S("2020MC_Conversation_QuickFilter_SelectColor&color=".concat(e.groupDetail),C):"all"===e.groupType?S("2020MC_Conversation_QuickFilter_SelectAll",C):"archive"===e.groupType?S("2020MC_Conversation_QuickFilter_Archived",C):"unread"===e.groupType&&S("2020MC_Conversation_QuickFilter_Unread",C);var t=this.getFilter(e),n=this.state.currentFilter===t?"":t;this.setState({currentFilter:n}),"unread"===n?this.props.listFilter({type:"unread",mode:"filter"}):this.props.EventBus.publish("im-weblite-list:filterList",{type:n})}},{key:"getFilter",value:function(e){return"color"===e.groupType?e.groupDetail:e.groupType}},{key:"render",value:function(){var e=this,t=this.props,n=t.labelGroups,a=t.operateContactGroup,r=t.EventBus,i=this.state,c=i.currentFilter,s=i.showMenu,l=i.hasShowGuide,u=[].concat(o()(n),[{groupType:"unread"}]);return b.createElement("div",{className:"contact-filter-bar-container",ref:function(t){return e.container=t},"data-exp":"2020MC_Conversation_QuickFilter_Show"},b.createElement("div",{className:"filter-group"},u.map(function(t){var n="color"===t.groupType;return b.createElement("div",{key:t.groupDetail,className:"group-item-box ".concat(c===e.getFilter(t)?"selected":""),onClick:e.onFilterClick.bind(e,t)},n?b.createElement("div",{className:"group-item-outer ".concat(t.groupDetail)},b.createElement("div",{className:"group-item-inner ".concat(t.groupDetail)})):b.createElement("img",{className:"filter-icon",src:x[t.groupType]}),b.createElement(w.a,{className:"filter-tip",content:n?t.groupName:N.get("action.".concat(t.groupType))}))})),c&&"all"!==c&&b.createElement("div",{className:"group-item-box clear",onClick:this.onFilterClick.bind(this,{groupType:"all"})},N.get("action.clear")||"Clear"),b.createElement("div",{className:"group-item-box",onClick:this.onMenuClick},b.createElement("div",{className:"management-box"},b.createElement(I,{type:"ellipsis",size:"small",style:{color:s?"#ff6a00":"#666"}})),b.createElement(w.a,{className:"filter-tip",content:N.get("action.management")||"Management"})),s&&b.createElement(E.a,{labelGroups:n,operateContactGroup:a,currentFilter:c,EventBus:r,containerDOM:this.container,coverClick:this.onMenuClick}),!l&&b.createElement(w.a,{className:"filter-guide",showClose:!0,onClose:this.onCloseGuide},b.createElement("p",{className:"filter-content"},N.get("filterGuide")||"You have labeld one conversation, click here to quick filter, you can rename or disband label via click",b.createElement(I,{type:"ellipsis",size:"xs",className:"guide-ellipsis"}))))}}]),t}(b.Component);t.a=O},function(e,t,n){"use strict";function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(n,!0).forEach(function(t){v()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var r=n(2),i=n.n(r),c=n(3),s=n.n(c),l=n(4),u=n.n(l),p=n(5),d=n.n(p),m=n(7),g=n.n(m),f=n(6),h=n.n(f),y=n(1),v=n.n(y),b=n(0),w=(n.n(b),n(49)),E=(n.n(w),window.IcbuIM.lib.log),k="/sc.ma.".concat(window.host),S=window.IcbuIM.Next,C=S.Icon,I=S.Dialog,_=S.Input,N=window.IcbuIM.lib.I18N.createI18N,x=N({parsePage:!0,namespace:"".concat(window.mcmsWithoutAppName?"":"intl-gangesweb.","messenger.list")}),O=N({parsePage:!0,namespace:"".concat(window.mcmsWithoutAppName?"":"intl-gangesweb.","onepage.ma")}),T=function(e){function t(e){var n;return i()(this,t),n=u()(this,d()(t).call(this,e)),v()(g()(n),"disbandGroup",function(){var e=n.props,t=e.item,a=e.operateContactGroup,o=e.currentFilter,r=e.EventBus;I.confirm({className:"list-label-dialog",content:x.get("disbandGroupTip.content",{groupName:t.groupName})||"移除后所有会话将会被释放，确认要移除吗？",title:x.get("disbandGroupTip.title")||"确认移除",locale:{ok:O.get("common.ok")||"OK",cancel:O.get("common.cancel")||"Cancel"},onOk:function(){E("2020MC_Conversation_QuickFilter_DismissColor&color=".concat(t.groupDetail),k),a({data:{operateType:"delete",group:t},callback:function(){o===t.groupDetail&&r.publish("im-weblite-list:filterList",{type:"all"})}})}})}),v()(g()(n),"editName",function(){var e=n.props,t=e.item,a=e.operateContactGroup,r="";I.confirm({className:"list-label-dialog",content:b.createElement(_,{className:"label-pick-input",maxLength:20,placeholder:x.get("list.labelDialog.inputPlaceholder")||"Enter label name.",onChange:function(e){return r=e}}),title:x.get("editNameTip.title")||"改名",locale:{ok:O.get("common.ok")||"OK",cancel:O.get("common.cancel")||"Cancel"},onOk:function(){E("2020MC_Conversation_QuickFilterSetting_EditColor",k),r&&a({data:{operateType:"update",group:o({},t,{groupName:r})}})}})}),n.state={},n}return h()(t,e),s()(t,[{key:"render",value:function(){var e=this.props.item;return b.createElement("div",{className:"edit-menu-item"},b.createElement("div",{className:"group-item-outer ".concat(e.groupDetail)},b.createElement("div",{className:"group-item-inner ".concat(e.groupDetail)})),b.createElement("p",{className:"group-name"},e.groupName),b.createElement(C,{type:"edit",size:"xs",className:"edit-icon",onClick:this.editName}),b.createElement("div",{className:"placeholder"}),b.createElement("p",{className:"group-remove",onClick:this.disbandGroup},x.get("action.Disband")||"remove"))}}]),t}(b.Component),L=function(e){function t(e){var n;return i()(this,t),n=u()(this,d()(t).call(this,e)),v()(g()(n),"coverClick",function(e){e.target===e.currentTarget&&n.props.coverClick()}),n.state={},n}return h()(t,e),s()(t,[{key:"getOuterHeight",value:function(){if(this.props.containerDOM){return"".concat(this.props.containerDOM.parentNode.getBoundingClientRect().height-56-40,"px")}}},{key:"render",value:function(){var e=this.props,t=e.labelGroups,n=e.operateContactGroup,a=e.currentFilter,o=e.EventBus;return b.createElement("div",{className:"edit-menu-container",style:{height:this.getOuterHeight()},onClick:this.coverClick},b.createElement("ul",{className:"mark-list"},t.map(function(e){return"color"===e.groupType?b.createElement(T,{key:e.groupDetail,item:e,operateContactGroup:n,currentFilter:a,EventBus:o}):null})))}}]),t}(b.Component);t.a=L},function(e,t){},function(e,t){},function(e,t,n){"use strict";var a=n(29),o=n.n(a),r=n(2),i=n.n(r),c=n(3),s=n.n(c),l=n(4),u=n.n(l),p=n(5),d=n.n(p),m=n(7),g=n.n(m),f=n(6),h=n.n(f),y=n(1),v=n.n(y),b=n(0),w=(n.n(b),n(52)),E=(n.n(w),window.IcbuIM.lib.log),k="/sc.ma.".concat(window.host),S=window.IcbuIM.lib.I18N.createI18N,C=S({parsePage:!0,namespace:"".concat(window.mcmsWithoutAppName?"":"intl-gangesweb.","messenger.list")}),I=[{type:"none",iconURL:"https://img.alicdn.com/tfs/TB1vuKAEW61gK0jSZFlXXXDKFXa-39-39.png",text:C.get("groupNone")||"None",logKey:"2020MC_ConversationGroup_All"},{type:"color",iconURL:"https://img.alicdn.com/tfs/TB1DwGyE4D1gK0jSZFKXXcJrVXa-36-39.png",text:C.get("groupByCustom")||"By Custom Group",logKey:"2020MC_ConversationGroup_ColorLable"},{type:"category",iconURL:"https://img.alicdn.com/tfs/TB15ROuE.H1gK0jSZSyXXXtlpXa-42-42.png",text:C.get("groupByCategory")||"By Related Product Category",logKey:"2020MC_ConversationGroup_ProductCatagory"},{type:"order",iconURL:"https://img.alicdn.com/tfs/TB13veAE1H2gK0jSZJnXXaT1FXa-42-42.png",text:C.get("groupByProgress")||"By Trading Progress",logKey:"2020MC_ConversationGroup_TradeProgress"}],_=function(e){function t(e){var n;return i()(this,t),n=u()(this,d()(t).call(this,e)),v()(g()(n),"onClick",function(){E(n.props.logKey,k),n.props.onClick(n.props.type)}),n}return h()(t,e),s()(t,[{key:"render",value:function(){var e=this.props,t=e.iconURL,n=e.text;return b.createElement("li",{className:"group-menu-item",onClick:this.onClick},t&&b.createElement("img",{className:"menu-icon",src:t}),b.createElement("p",{className:"menu-text"},n))}}]),t}(b.Component),N=function(e){function t(e){var n;return i()(this,t),n=u()(this,d()(t).call(this,e)),v()(g()(n),"coverClick",function(e){e.target===e.currentTarget&&n.props.coverClick()}),n.state={},n}return h()(t,e),s()(t,[{key:"render",value:function(){var e=this;return b.createElement("div",{className:"group-menu-container",onClick:this.coverClick},b.createElement("ul",{className:"group-list"},I.length&&I.map(function(t){return b.createElement(_,o()({key:t.type},t,{onClick:e.props.itemClick}))})))}}]),t}(b.Component);t.a=N},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=t.isBuyerPWA=location.href.indexOf("messengerAlone.htm")>0,o=t.isSellerPWA=location.href.indexOf("weblitePWA.htm")>0,r=t.isPureMessenger=location.href.indexOf("messenger.htm")>0,i=t.isPureWeblite=location.href.indexOf("weblite.htm")>0,c=t.isWebATM=location.href.indexOf("webATM.htm")>0;t.isWeblite=i||c,t.isMessenger=a||o||r},function(e,t){"undefined"==typeof window&&(window={ctrl:{},lib:{}}),!window.ctrl&&(window.ctrl={}),!window.lib&&(window.lib={}),function(e,t){function n(){var e={},t=new g(function(t,n){e.resolve=t,e.reject=n});return e.promise=t,e}function a(e,t){for(var n in t)void 0===e[n]&&(e[n]=t[n]);return e}function o(e){(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]||document.firstElementChild||document).appendChild(e)}function r(e){var t=[];for(var n in e)e[n]&&t.push(n+"="+encodeURIComponent(e[n]));return t.join("&")}function i(e){try{return".com"!==e.substring(e.lastIndexOf("."))?(e.split(".")||[]).length<=3?e:e.split(".").slice(1).join("."):e.substring(e.lastIndexOf(".",e.lastIndexOf(".")-1)+1)}catch(t){return e.substring(e.lastIndexOf(".",e.lastIndexOf(".")-1)+1)}}function c(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n,a,o,r,i;return o=2147483648&e,r=2147483648&t,n=1073741824&e,a=1073741824&t,i=(1073741823&e)+(1073741823&t),n&a?2147483648^i^o^r:n|a?1073741824&i?3221225472^i^o^r:1073741824^i^o^r:i^o^r}function a(e,t,n){return e&t|~e&n}function o(e,t,n){return e&n|t&~n}function r(e,t,n){return e^t^n}function i(e,t,n){return t^(e|~n)}function c(e,o,r,i,c,s,l){return e=n(e,n(n(a(o,r,i),c),l)),n(t(e,s),o)}function s(e,a,r,i,c,s,l){return e=n(e,n(n(o(a,r,i),c),l)),n(t(e,s),a)}function l(e,a,o,i,c,s,l){return e=n(e,n(n(r(a,o,i),c),l)),n(t(e,s),a)}function u(e,a,o,r,c,s,l){return e=n(e,n(n(i(a,o,r),c),l)),n(t(e,s),a)}function p(e){var t,n,a="",o="";for(n=0;3>=n;n++)t=e>>>8*n&255,o="0"+t.toString(16),a+=o.substr(o.length-2,2);return a}var d,m,g,f,h,y,v,b,w,E=[];for(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var a=e.charCodeAt(n);128>a?t+=String.fromCharCode(a):a>127&&2048>a?(t+=String.fromCharCode(a>>6|192),t+=String.fromCharCode(63&a|128)):(t+=String.fromCharCode(a>>12|224),t+=String.fromCharCode(a>>6&63|128),t+=String.fromCharCode(63&a|128))}return t}(e),E=function(e){for(var t,n=e.length,a=n+8,o=(a-a%64)/64,r=16*(o+1),i=new Array(r-1),c=0,s=0;n>s;)t=(s-s%4)/4,c=s%4*8,i[t]=i[t]|e.charCodeAt(s)<<c,s++;return t=(s-s%4)/4,c=s%4*8,i[t]=i[t]|128<<c,i[r-2]=n<<3,i[r-1]=n>>>29,i}(e),y=1732584193,v=4023233417,b=2562383102,w=271733878,d=0;d<E.length;d+=16)m=y,g=v,f=b,h=w,y=c(y,v,b,w,E[d+0],7,3614090360),w=c(w,y,v,b,E[d+1],12,3905402710),b=c(b,w,y,v,E[d+2],17,606105819),v=c(v,b,w,y,E[d+3],22,3250441966),y=c(y,v,b,w,E[d+4],7,4118548399),w=c(w,y,v,b,E[d+5],12,1200080426),b=c(b,w,y,v,E[d+6],17,2821735955),v=c(v,b,w,y,E[d+7],22,4249261313),y=c(y,v,b,w,E[d+8],7,1770035416),w=c(w,y,v,b,E[d+9],12,2336552879),b=c(b,w,y,v,E[d+10],17,4294925233),v=c(v,b,w,y,E[d+11],22,2304563134),y=c(y,v,b,w,E[d+12],7,1804603682),w=c(w,y,v,b,E[d+13],12,4254626195),b=c(b,w,y,v,E[d+14],17,2792965006),v=c(v,b,w,y,E[d+15],22,1236535329),y=s(y,v,b,w,E[d+1],5,4129170786),w=s(w,y,v,b,E[d+6],9,3225465664),b=s(b,w,y,v,E[d+11],14,643717713),v=s(v,b,w,y,E[d+0],20,3921069994),y=s(y,v,b,w,E[d+5],5,3593408605),w=s(w,y,v,b,E[d+10],9,38016083),b=s(b,w,y,v,E[d+15],14,3634488961),v=s(v,b,w,y,E[d+4],20,3889429448),y=s(y,v,b,w,E[d+9],5,568446438),w=s(w,y,v,b,E[d+14],9,3275163606),b=s(b,w,y,v,E[d+3],14,4107603335),v=s(v,b,w,y,E[d+8],20,1163531501),y=s(y,v,b,w,E[d+13],5,2850285829),w=s(w,y,v,b,E[d+2],9,4243563512),b=s(b,w,y,v,E[d+7],14,1735328473),v=s(v,b,w,y,E[d+12],20,2368359562),y=l(y,v,b,w,E[d+5],4,4294588738),w=l(w,y,v,b,E[d+8],11,2272392833),b=l(b,w,y,v,E[d+11],16,1839030562),v=l(v,b,w,y,E[d+14],23,4259657740),y=l(y,v,b,w,E[d+1],4,2763975236),w=l(w,y,v,b,E[d+4],11,1272893353),b=l(b,w,y,v,E[d+7],16,4139469664),v=l(v,b,w,y,E[d+10],23,3200236656),y=l(y,v,b,w,E[d+13],4,681279174),w=l(w,y,v,b,E[d+0],11,3936430074),b=l(b,w,y,v,E[d+3],16,3572445317),v=l(v,b,w,y,E[d+6],23,76029189),y=l(y,v,b,w,E[d+9],4,3654602809),w=l(w,y,v,b,E[d+12],11,3873151461),b=l(b,w,y,v,E[d+15],16,530742520),v=l(v,b,w,y,E[d+2],23,3299628645),y=u(y,v,b,w,E[d+0],6,4096336452),w=u(w,y,v,b,E[d+7],10,1126891415),b=u(b,w,y,v,E[d+14],15,2878612391),v=u(v,b,w,y,E[d+5],21,4237533241),y=u(y,v,b,w,E[d+12],6,1700485571),w=u(w,y,v,b,E[d+3],10,2399980690),b=u(b,w,y,v,E[d+10],15,4293915773),v=u(v,b,w,y,E[d+1],21,2240044497),y=u(y,v,b,w,E[d+8],6,1873313359),w=u(w,y,v,b,E[d+15],10,4264355552),b=u(b,w,y,v,E[d+6],15,2734768916),v=u(v,b,w,y,E[d+13],21,1309151649),y=u(y,v,b,w,E[d+4],6,4149444226),w=u(w,y,v,b,E[d+11],10,3174756917),b=u(b,w,y,v,E[d+2],15,718787259),v=u(v,b,w,y,E[d+9],21,3951481745),y=n(y,m),v=n(v,g),b=n(b,f),w=n(w,h);return(p(y)+p(v)+p(b)+p(w)).toLowerCase()}function s(e){return"[object Object]"=={}.toString.call(e)}function l(e,t,n){var a=n||{};document.cookie=e.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29")+"="+t.replace(/[^+#$&\/:<-\[\]-}]/g,encodeURIComponent)+(a.domain?";domain="+a.domain:"")+(a.path?";path="+a.path:"")+(a.secure?";secure":"")+(a.httponly?";HttpOnly":"")+(a.sameSite?";Samesite="+a.sameSite:"")}function u(e){var t=new RegExp("(?:^|;\\s*)"+e+"\\=([^;]+)(?:;\\s*|$)").exec(document.cookie);return t?t[1]:void 0}function p(e,t,n){var a=new Date;a.setTime(a.getTime()-864e5);document.cookie=e+"=;path=/;domain=."+t+";expires="+a.toGMTString(),document.cookie=e+"=;path=/;domain=."+n+"."+t+";expires="+a.toGMTString()}function d(e,t){for(var n=e.split("."),a=t.split("."),o=0;3>o;o++){var r=Number(n[o]),i=Number(a[o]);if(r>i)return 1;if(i>r)return-1;if(!isNaN(r)&&isNaN(i))return 1;if(isNaN(r)&&!isNaN(i))return-1}return 0}function m(e){this.id=""+(new Date).getTime()+ ++k,this.params=a(e||{},{v:"*",data:{},type:"get",dataType:"jsonp"}),this.params.type=this.params.type.toLowerCase(),"object"==typeof this.params.data&&(this.params.data=JSON.stringify(this.params.data)),this.middlewares=y.slice(0)}var g=e.Promise,f=(g||{resolve:function(){}}).resolve();String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")});var h={useJsonpResultType:!1,safariGoLogin:!0,useAlipayJSBridge:!1},y=[],v={ERROR:-1,SUCCESS:0,TOKEN_EXPIRED:1,SESSION_EXPIRED:2};(function(){var t=e.location.hostname;if(!t){var n=e.parent.location.hostname;n&&~n.indexOf("zebra.alibaba-inc.com")&&(t=n)}var a=["taobao.net","taobao.com","tmall.com","tmall.hk","alibaba-inc.com"],o=new RegExp("([^.]*?)\\.?((?:"+a.join(")|(?:").replace(/\./g,"\\.")+"))","i"),r=t.match(o)||[],i=r[2]||"taobao.com",c=r[1]||"m";"taobao.net"!==i||"x"!==c&&"waptest"!==c&&"daily"!==c?"taobao.net"===i&&"demo"===c?c="demo":"alibaba-inc.com"===i&&"zebra"===c?c="zebra":"waptest"!==c&&"wapa"!==c&&"m"!==c&&(c="m"):c="waptest";var s="h5api";"taobao.net"===i&&"waptest"===c&&(s="acs"),h.mainDomain=i,h.subDomain=c,h.prefix=s})(),function(){var t=e.navigator.userAgent,n=t.match(/WindVane[\/\s]([\d\.\_]+)/);n&&(h.WindVaneVersion=n[1]);var a=t.match(/AliApp\(([^\/]+)\/([\d\.\_]+)\)/i);a&&(h.AliAppName=a[1],h.AliAppVersion=a[2]);var o=t.match(/AMapClient\/([\d\.\_]+)/i);o&&(h.AliAppName="AMAP",h.AliAppVersion=o[1])}();var b=/[Android|Adr]/.test(e.navigator.userAgent),w="AP"===h.AliAppName,E=w&&d(h.AliAppVersion,"10.1.2")>=0||"KB"===h.AliAppName&&d(h.AliAppVersion,"7.1.62")>=0||b&&"AMAP"===h.AliAppName&&d(h.AliAppVersion,"1.0.1")>=0,k=0;m.prototype.use=function(e){if(!e)throw new Error("middleware is undefined");return this.middlewares.push(e),this},m.prototype.__processRequestMethod=function(e){var t=this.params,n=this.options;"get"===t.type&&"jsonp"===t.dataType?n.getJSONP=!0:"get"===t.type&&"originaljsonp"===t.dataType?n.getOriginalJSONP=!0:"get"===t.type&&"json"===t.dataType?n.getJSON=!0:"post"===t.type&&(n.postJSON=!0),e()},m.prototype.__processRequestType=function(n){var a=this,o=this.params,r=this.options;if(!0===h.H5Request&&(r.H5Request=!0),!0===h.WindVaneRequest&&(r.WindVaneRequest=!0),!1===r.H5Request&&!0===r.WindVaneRequest){if(!E&&(!t.windvane||parseFloat(r.WindVaneVersion)<5.4))throw new Error("WINDVANE_NOT_FOUND::缺少WindVane环境");if(E&&!e.AlipayJSBridge)throw new Error("ALIPAY_NOT_READY::支付宝通道未准备好，支付宝请见 https://lark.alipay.com/mtbsdkdocs/mtopjssdkdocs/pucq6z")}else if(!0===r.H5Request)r.WindVaneRequest=!1;else if(void 0===r.WindVaneRequest&&void 0===r.H5Request){if(t.windvane&&parseFloat(r.WindVaneVersion)>=5.4?r.WindVaneRequest=!0:r.H5Request=!0,E){if(r.WindVaneRequest=r.H5Request=void 0,e.AlipayJSBridge)if(s(o.data))r.WindVaneRequest=!0;else try{s(JSON.parse(o.data))?r.WindVaneRequest=!0:r.H5Request=!0}catch(e){r.H5Request=!0}else r.H5Request=!0;"AMAP"!==h.AliAppName||o.useNebulaJSbridgeWithAMAP||(r.WindVaneRequest=r.H5Request=void 0,r.H5Request=!0)}window.self!==window.top&&(r.H5Request=!0)}var i=e.navigator.userAgent.toLowerCase();return i.indexOf("youku")>-1&&r.mainDomain.indexOf("youku.com")<0&&(r.WindVaneRequest=!1,r.H5Request=!0),r.mainDomain.indexOf("youku.com")>-1&&i.indexOf("youku")<0&&(r.WindVaneRequest=!1,r.H5Request=!0),n?n().then(function(){var e=r.retJson.ret;if(e instanceof Array&&(e=e.join(",")),!0===r.WindVaneRequest&&E&&r.retJson.error||!e||e.indexOf("PARAM_PARSE_ERROR")>-1||e.indexOf("HY_FAILED")>-1||e.indexOf("HY_NO_HANDLER")>-1||e.indexOf("HY_CLOSED")>-1||e.indexOf("HY_EXCEPTION")>-1||e.indexOf("HY_NO_PERMISSION")>-1){if(!E||!isNaN(r.retJson.error)||-1!==r.retJson.error.indexOf("FAIL_SYS_ACCESS_DENIED"))return E&&s(o.data)&&(o.data=JSON.stringify(o.data)),h.H5Request=!0,a.__sequence([a.__processRequestType,a.__processToken,a.__processRequestUrl,a.middlewares,a.__processRequest]);void 0===r.retJson.api&&void 0===r.retJson.v&&(r.retJson.api=o.api,r.retJson.v=o.v,r.retJson.ret=[r.retJson.error+"::"+r.retJson.errorMessage],r.retJson.data={})}}):void 0};var S="_m_h5_c",C="_m_h5_tk";m.prototype.__getTokenFromAlipay=function(){var t=n(),a=this.options,o=(e.navigator.userAgent,!!location.protocol.match(/^https?\:$/));return!0===a.useAlipayJSBridge&&!o&&E&&e.AlipayJSBridge&&e.AlipayJSBridge.call?e.AlipayJSBridge.call("getMtopToken",function(e){e&&e.token&&(a.token=e.token),t.resolve()},function(){t.resolve()}):t.resolve(),t.promise},m.prototype.__getTokenFromCookie=function(){var e=this.options;return e.CDR&&u(S)?e.token=u(S).split(";")[0]:e.token=e.token||u(C),e.token&&(e.token=e.token.split("_")[0]),g.resolve()},m.prototype.__waitWKWebViewCookie=function(t){var n=this.options;n.waitWKWebViewCookieFn&&n.H5Request&&e.webkit&&e.webkit.messageHandlers?n.waitWKWebViewCookieFn(t):t()},m.prototype.__processToken=function(e){var t=this,n=this.options;return this.params,n.token&&delete n.token,!0!==n.WindVaneRequest?f.then(function(){return t.__getTokenFromAlipay()}).then(function(){return t.__getTokenFromCookie()}).then(e).then(function(){var e=n.retJson,a=e.ret;if(a instanceof Array&&(a=a.join(",")),a.indexOf("TOKEN_EMPTY")>-1||(!0===n.CDR||!0===n.syncCookieMode)&&a.indexOf("ILLEGAL_ACCESS")>-1||a.indexOf("TOKEN_EXOIRED")>-1){if(n.maxRetryTimes=n.maxRetryTimes||5,n.failTimes=n.failTimes||0,n.H5Request&&++n.failTimes<n.maxRetryTimes){var o=[t.__waitWKWebViewCookie,t.__processToken,t.__processRequestUrl,t.middlewares,t.__processRequest];if(!0===n.syncCookieMode&&t.constructor.__cookieProcessorId!==t.id)if(t.constructor.__cookieProcessor){var r=function(e){var n=function(){t.constructor.__cookieProcessor=null,t.constructor.__cookieProcessorId=null,e()};t.constructor.__cookieProcessor?t.constructor.__cookieProcessor.then(n).catch(n):e()};o=[r,t.__waitWKWebViewCookie,t.__processToken,t.__processRequestUrl,t.middlewares,t.__processRequest]}else t.constructor.__cookieProcessor=t.__requestProcessor,t.constructor.__cookieProcessorId=t.id;return t.__sequence(o)}n.maxRetryTimes>0&&(p(S,n.pageDomain,"*"),p(C,n.mainDomain,n.subDomain),p("_m_h5_tk_enc",n.mainDomain,n.subDomain)),e.retType=v.TOKEN_EXPIRED}}):void e()},m.prototype.__processRequestUrl=function(t){var n=this.params,a=this.options;if(a.hostSetting&&a.hostSetting[e.location.hostname]){var o=a.hostSetting[e.location.hostname];o.prefix&&(a.prefix=o.prefix),o.subDomain&&(a.subDomain=o.subDomain),o.mainDomain&&(a.mainDomain=o.mainDomain)}if(!0===a.H5Request){var r="//"+(a.prefix?a.prefix+".":"")+(a.subDomain?a.subDomain+".":"")+a.mainDomain+"/h5/"+n.api.toLowerCase()+"/"+n.v.toLowerCase()+"/",i=n.appKey||("waptest"===a.subDomain?"4272":"12574478"),s=(new Date).getTime(),l=c(a.token+"&"+s+"&"+i+"&"+n.data),u={jsv:"2.6.0",appKey:i,t:s,sign:l},p={data:n.data,ua:n.ua};Object.keys(n).forEach(function(e){void 0===u[e]&&void 0===p[e]&&"headers"!==e&&"ext_headers"!==e&&"ext_querys"!==e&&(u[e]=n[e])}),n.ext_querys&&Object.keys(n.ext_querys).forEach(function(e){u[e]=n.ext_querys[e]}),a.getJSONP?u.type="jsonp":a.getOriginalJSONP?u.type="originaljsonp":(a.getJSON||a.postJSON)&&(u.type="originaljson"),void 0!==n.valueType&&("original"===n.valueType?a.getJSONP||a.getOriginalJSONP?u.type="originaljsonp":(a.getJSON||a.postJSON)&&(u.type="originaljson"):"string"===n.valueType&&(a.getJSONP||a.getOriginalJSONP?u.type="jsonp":(a.getJSON||a.postJSON)&&(u.type="json"))),!0===a.useJsonpResultType&&"originaljson"===u.type&&delete u.type,a.dangerouslySetProtocol&&(r=a.dangerouslySetProtocol+":"+r),a.querystring=u,a.postdata=p,a.path=r}t()},m.prototype.__processUnitPrefix=function(e){e()};var I=0;m.prototype.__requestJSONP=function(e){function t(e){if(u&&clearTimeout(u),p.parentNode&&p.parentNode.removeChild(p),"TIMEOUT"===e)window[l]=function(){window[l]=void 0;try{delete window[l]}catch(e){}};else{window[l]=void 0;try{delete window[l]}catch(e){}}}var a=n(),i=this.params,c=this.options,s=i.timeout||2e4,l="mtopjsonp"+(i.jsonpIncPrefix||"")+ ++I,u=setTimeout(function(){e(c.timeoutErrMsg||"TIMEOUT::接口超时"),t("TIMEOUT")},s);c.querystring.callback=l;var p=document.createElement("script");return p.src=c.path+"?"+r(c.querystring)+"&"+r(c.postdata),p.async=!0,p.onerror=function(){t("ABORT"),e(c.abortErrMsg||"ABORT::接口异常退出")},window[l]=function(){c.results=Array.prototype.slice.call(arguments),t(),a.resolve()},o(p),a.promise},m.prototype.__requestJSON=function(t){function a(e){p&&clearTimeout(p),"TIMEOUT"===e&&s.abort()}var o=n(),i=this.params,c=this.options,s=new e.XMLHttpRequest,l=i.timeout||2e4,p=setTimeout(function(){t(c.timeoutErrMsg||"TIMEOUT::接口超时"),a("TIMEOUT")},l);c.CDR&&u(S)&&(c.querystring.c=decodeURIComponent(u(S))),s.onreadystatechange=function(){if(4==s.readyState){var e,n,r=s.status;if(r>=200&&300>r||304==r){a(),e=s.responseText,n=s.getAllResponseHeaders()||"";try{e=/^\s*$/.test(e)?{}:JSON.parse(e),e.responseHeaders=n,c.results=[e],o.resolve()}catch(e){t("PARSE_JSON_ERROR::解析JSON失败")}}else a("ABORT"),t(c.abortErrMsg||"ABORT::接口异常退出")}};var d,m,g=c.path+"?"+r(c.querystring);c.getJSON?(d="GET",g+="&"+r(c.postdata)):c.postJSON&&(d="POST",m=r(c.postdata)),s.open(d,g,!0),s.withCredentials=!0,s.setRequestHeader("Accept","application/json"),s.setRequestHeader("Content-type","application/x-www-form-urlencoded");var f=i.ext_headers||i.headers;if(f)for(var h in f)s.setRequestHeader(h,f[h]);return s.send(m),o.promise},m.prototype.__requestWindVane=function(e){function a(e){i.results=[e],o.resolve()}var o=n(),r=this.params,i=this.options,c=r.data,s=r.api,l=r.v,u=i.postJSON?1:0,p=i.getJSON||i.postJSON||i.getOriginalJSONP?"originaljson":"";void 0!==r.valueType&&("original"===r.valueType?p="originaljson":"string"===r.valueType&&(p="")),!0===i.useJsonpResultType&&(p="");var d,m,g="https"===location.protocol?1:0,f=r.isSec||0,h=r.sessionOption||"AutoLoginOnly",y=r.ecode||0,v=r.ext_headers||{},b=r.ext_querys||{};m=void 0!==r.timer?parseInt(r.timer):void 0!==r.timeout?parseInt(r.timeout):2e4,d=2*m,!0===r.needLogin&&void 0===r.sessionOption&&(h="AutoLoginAndManualLogin"),void 0!==r.secType&&void 0===r.isSec&&(f=r.secType);var w={api:s,v:l,post:String(u),type:p,isHttps:String(g),ecode:String(y),isSec:String(f),param:JSON.parse(c),timer:m,sessionOption:h,ext_headers:v,ext_querys:b};r.ttid&&!0===i.dangerouslySetWVTtid&&(w.ttid=r.ttid),Object.assign&&r.dangerouslySetWindvaneParams&&Object.assign(w,r.dangerouslySetWindvaneParams);var E="MtopWVPlugin";return"string"==typeof r.customWindVaneClassName&&(E=r.customWindVaneClassName),t.windvane.call(E,"send",w,a,a,d),o.promise},m.prototype.__requestAlipay=function(t){function a(e){i.results=[e],o.resolve()}var o=n(),r=this.params,i=this.options,c={apiName:r.api,apiVersion:r.v,needEcodeSign:"1"===String(r.ecode),headers:r.ext_headers||{},usePost:!!i.postJSON};s(r.data)||(r.data=JSON.parse(r.data)),c.data=r.data,r.ttid&&!0===i.dangerouslySetWVTtid&&(c.ttid=r.ttid),(i.getJSON||i.postJSON||i.getOriginalJSONP)&&(c.type="originaljson"),void 0!==r.valueType&&("original"===r.valueType?c.type="originaljson":"string"===r.valueType&&delete c.type),!0===i.useJsonpResultType&&delete c.type,Object.assign&&r.dangerouslySetAlipayParams&&Object.assign(c,r.dangerouslySetAlipayParams);var l="mtop";return"string"==typeof r.customAlipayJSBridgeApi&&(l=r.customAlipayJSBridgeApi),e.AlipayJSBridge.call(l,c,a),o.promise},m.prototype.__processRequest=function(e,t){var n=this;return f.then(function(){var e=n.options;if(e.H5Request&&(e.getJSONP||e.getOriginalJSONP))return n.__requestJSONP(t);if(e.H5Request&&(e.getJSON||e.postJSON))return n.__requestJSON(t);if(e.WindVaneRequest)return E?n.__requestAlipay(t):n.__requestWindVane(t);throw new Error("UNEXCEPT_REQUEST::错误的请求类型")}).then(e).then(function(){var e=n.options,t=(n.params,e.results[0]),a=t&&t.ret||[];t.ret=a,a instanceof Array&&(a=a.join(","));var o=t.c;e.CDR&&o&&l(S,o,{domain:e.pageDomain,path:"/",secure:e.secure,sameSite:e.sameSite}),a.indexOf("SUCCESS")>-1?t.retType=v.SUCCESS:t.retType=v.ERROR,e.retJson=t})},m.prototype.__sequence=function(e){function t(e){if(e instanceof Array)e.forEach(t);else{var i,c=n(),s=n();o.push(function(){return c=n(),i=e.call(a,function(e){return c.resolve(e),s.promise},function(e){return c.reject(e),s.promise}),i&&(i=i.catch(function(e){c.reject(e)})),c.promise}),r.push(function(e){return s.resolve(e),i})}}var a=this,o=[],r=[];e.forEach(t);for(var i,c=f;i=o.shift();)c=c.then(i);for(;i=r.pop();)c=c.then(i);return c};var _=function(e){e()},N=function(e){e()};m.prototype.request=function(n){var o=this;if(this.options=a(n||{},h),!g){var r="当前浏览器不支持Promise，请在windows对象上挂载Promise对象";throw t.mtop={ERROR:r},new Error(r)}var c=g.resolve([_,N]).then(function(e){var t=e[0],n=e[1];return o.__sequence([t,o.__processRequestMethod,o.__processRequestType,o.__processToken,o.__processRequestUrl,o.middlewares,o.__processRequest,n])}).then(function(){var e=o.options.retJson;return e.retType!==v.SUCCESS?g.reject(e):o.options.successCallback?void o.options.successCallback(e):g.resolve(e)}).catch(function(e){var n;return e instanceof Error?(console.error(e.stack),n={ret:[e.message],stack:[e.stack],retJson:v.ERROR}):n="string"==typeof e?{ret:[e],retJson:v.ERROR}:void 0!==e?e:o.options.retJson,t.mtop.errorListener&&t.mtop.errorListener({api:o.params.api,data:o.params.data,v:o.params.v,retJson:n}),o.options.failureCallback?void o.options.failureCallback(n):g.reject(n)});return this.__processRequestType(),o.options.H5Request&&(o.constructor.__firstProcessor||(o.constructor.__firstProcessor=c),_=function(e){o.constructor.__firstProcessor.then(e).catch(e)}),("get"===this.params.type&&"json"===this.params.dataType||"post"===this.params.type)&&(n.pageDomain=n.pageDomain||i(e.location.hostname),n.mainDomain!==n.pageDomain&&(n.maxRetryTimes=4,n.CDR=!0)),this.__requestProcessor=c,c},t.mtop=function(e){return new m(e)},t.mtop.request=function(e,t,n){var a={H5Request:e.H5Request,WindVaneRequest:e.WindVaneRequest,LoginRequest:e.LoginRequest,AntiCreep:e.AntiCreep,AntiFlood:e.AntiFlood,successCallback:t,failureCallback:n||t};return new m(e).request(a)},t.mtop.H5Request=function(e,t,n){var a={H5Request:!0,successCallback:t,failureCallback:n||t};return new m(e).request(a)},t.mtop.middlewares=y,t.mtop.config=h,t.mtop.RESPONSE_TYPE=v,t.mtop.CLASS=m}(window,window.lib||(window.lib={})),function(e,t){function n(e){return e.preventDefault(),!1}function a(e){var t=new RegExp("(?:^|;\\s*)"+e+"\\=([^;]+)(?:;\\s*|$)").exec(document.cookie);return t?t[1]:void 0}function o(t,a){var o=this,r=e.dpr||1,i=document.createElement("div"),c=document.documentElement.getBoundingClientRect(),s=Math.max(c.width,window.innerWidth)/r,l=Math.max(c.height,window.innerHeight)/r;i.style.cssText=["-webkit-transform:scale("+r+") translateZ(0)","-ms-transform:scale("+r+") translateZ(0)","transform:scale("+r+") translateZ(0)","-webkit-transform-origin:0 0","-ms-transform-origin:0 0","transform-origin:0 0","width:"+s+"px","height:"+l+"px","z-index:2147483647","position:"+(s>800?"fixed":"absolute"),"left:0","top:0px","background:"+(s>800?"rgba(0,0,0,.5)":"#FFF"),"display:none"].join(";");var u=document.createElement("div");u.style.cssText=["width:100%","height:52px","background:#EEE","line-height:52px","text-align:left","box-sizing:border-box","padding-left:20px","position:absolute","left:0","top:0","font-size:16px","font-weight:bold","color:#333"].join(";"),u.innerText=t;var p=navigator.userAgent.match(/.*(iPhone|iPad|Android|ios|SymbianOS|Windows Phone).*/i),d=document.createElement("img");d.style.cssText=["display:block","position:absolute","margin-top:15px","right:0","top:0","height:15px","line-height:52px","padding:0 20px","color:#999"].join(";"),d.src="https://gw.alicdn.com/tfs/TB1QZN.CYj1gK0jSZFuXXcrHpXa-200-200.png";var m=document.createElement("iframe");m.style.cssText=["width:100%","height:100%","border:0","overflow:hidden"].join(";"),p?(u.appendChild(d),i.appendChild(u)):(d.style.cssText=["position:absolute","width:15px","height:15px","top: 50%;","left: 50%;","margin: -153px 0 0 184px;","cursor: pointer","border:0","z-index:1","overflow:hidden"].join(";"),i.appendChild(d),m.style.cssText=["position:absolute","top:50%","left:50%","margin: -160px 0 0 -210px;","height:320px","min-width:420px","border:0","background:#FFF","overflow:hidden"].join(";")),i.appendChild(m),i.className="J_MIDDLEWARE_FRAME_WIDGET",document.body.appendChild(i),m.src=a,d.addEventListener("click",function(){o.hide();var e=document.createEvent("HTMLEvents");e.initEvent("close",!1,!1),i.dispatchEvent(e)},!1),this.addEventListener=function(){i.addEventListener.apply(i,arguments)},this.removeEventListener=function(){i.removeEventListener.apply(i,arguments)},this.show=function(){document.addEventListener("touchmove",n,!1),i.style.display="block",window.scrollTo(0,0)},this.hide=function(){document.removeEventListener("touchmove",n),window.scrollTo(0,-c.top),i.parentNode&&i.parentNode.removeChild(i)}}function r(e){var n=this,a=this.options,o=this.params;return e().then(function(){var e=a.retJson,r=e.ret,i=navigator.userAgent.toLowerCase(),c=i.indexOf("safari")>-1&&i.indexOf("chrome")<0&&i.indexOf("qqbrowser")<0;if(r instanceof Array&&(r=r.join(",")),(r.indexOf("SESSION_EXPIRED")>-1||r.indexOf("SID_INVALID")>-1||r.indexOf("AUTH_REJECT")>-1||r.indexOf("NEED_LOGIN")>-1)&&(e.retType=p.SESSION_EXPIRED,!a.WindVaneRequest&&(!0===u.LoginRequest||!0===a.LoginRequest||!0===o.needLogin))){if(!t.login)throw new Error("LOGIN_NOT_FOUND::缺少lib.login");if(!0!==a.safariGoLogin||!c||"taobao.com"===a.pageDomain)return t.login.goLoginAsync().then(function(e){return n.__sequence([n.__processToken,n.__processRequestUrl,n.__processUnitPrefix,n.middlewares,n.__processRequest])}).catch(function(e){throw"CANCEL"===e?new Error("LOGIN_CANCEL::用户取消登录"):new Error("LOGIN_FAILURE::用户登录失败")});t.login.goLogin()}})}function i(e){var t=this.options;return this.params,!0!==t.H5Request||!0!==u.AntiFlood&&!0!==t.AntiFlood?void e():e().then(function(){var e=t.retJson,n=e.ret;n instanceof Array&&(n=n.join(",")),n.indexOf("FAIL_SYS_USER_VALIDATE")>-1&&e.data.url&&(t.AntiFloodReferer?location.href=e.data.url.replace(/(http_referer=).+/,"$1"+t.AntiFloodReferer):location.href=e.data.url)})}function c(t){var n=this,r=this.options,i=this.params;return!1!==r.AntiCreep&&(r.AntiCreep=!0),!0!==i.forceAntiCreep&&!0!==r.H5Request||!0!==u.AntiCreep&&!0!==r.AntiCreep?void t():t().then(function(){var t=r.retJson,c=t.ret;if(c instanceof Array&&(c=c.join(",")),(c.indexOf("RGV587_ERROR::SM")>-1||c.indexOf("ASSIST_FLAG")>-1)&&t.data.url){var l="_m_h5_smt",u=a(l),p=!1;if(!0===r.saveAntiCreepToken&&u){u=JSON.parse(u);for(var d in u)i[d]&&(p=!0)}if(!0===r.saveAntiCreepToken&&u&&!p){for(var d in u)i[d]=u[d];return n.__sequence([n.__processToken,n.__processRequestUrl,n.__processUnitPrefix,n.middlewares,n.__processRequest])}return new s(function(a,c){function s(){d.removeEventListener("close",s),e.removeEventListener("message",u),c("USER_INPUT_CANCEL::用户取消输入")}function u(t){var o;try{o=JSON.parse(t.data)||{}}catch(e){}if(o&&"child"===o.type){d.removeEventListener("close",s),e.removeEventListener("message",u),d.hide();var p;try{"string"==typeof(p=JSON.parse(decodeURIComponent(o.content)))&&(p=JSON.parse(p));for(var m in p)i[m]=p[m];!0===r.saveAntiCreepToken?(document.cookie=l+"="+JSON.stringify(p)+";",e.location.reload()):n.__sequence([n.__processToken,n.__processRequestUrl,n.__processUnitPrefix,n.middlewares,n.__processRequest]).then(a)}catch(e){c("USER_INPUT_FAILURE::用户输入失败")}}}var p=t.data.url,d=new o("",p);d.addEventListener("close",s,!1),e.addEventListener("message",u,!1),d.show()})}})}if(!t||!t.mtop||t.mtop.ERROR)throw new Error("Mtop 初始化失败！");var s=e.Promise,l=t.mtop.CLASS,u=t.mtop.config,p=t.mtop.RESPONSE_TYPE;t.mtop.middlewares.push(r),t.mtop.loginRequest=function(e,t,n){var a={LoginRequest:!0,H5Request:!0,successCallback:t,failureCallback:n||t};return new l(e).request(a)},t.mtop.antiFloodRequest=function(e,t,n){var a={AntiFlood:!0,successCallback:t,failureCallback:n||t};return new l(e).request(a)},t.mtop.middlewares.push(i),t.mtop.antiCreepRequest=function(e,t,n){var a={AntiCreep:!0,successCallback:t,failureCallback:n||t};return new l(e).request(a)},t.mtop.middlewares.push(c)}(window,window.lib||(window.lib={})),e.exports=window.lib.mtop},function(e,t){},function(e,t){}]);